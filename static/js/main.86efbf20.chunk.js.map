{"version":3,"sources":["services/errorHandler.js","services/FileObj.js","services/localStorage.js","services/AppData.js","services/Subscriber.js","services/Subscription.js","services/dataController.js","assets/plusSign.svg","components/DateAndTagsEditor.js","assets/placeholder.svg","assets/openIcon.svg","assets/wavy-logo.svg","assets/minusSign2.svg","assets/trashTumbleIcon.svg","assets/importButton.svg","assets/exportButton.svg","assets/dateAndTagsIcon.svg","assets/completionTick.svg","components/File.js","components/Node.js","components/Main.js","components/Timeline.js","components/NavBar.js","assets/back-arrow.svg","webpack:///./src/assets/completionTick.svg?b967","components/AddNoteModal.js","components/UploadModal.js","theme/globalStyles.js","App.js","index.js"],"names":["errorHandler","e","console","error","FileObj","uid","fileRef","activeTimeStamp","timeStamps","tags","type","name","text","size","this","Object","keys","forEach","key","formatDate","prototype","dateTime","isFormatedDate","makeMinTwoDigits","n","str","length","d","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","unFormatDate","date","len","substr","match","getActiveDate","setActiveDate","flagMissingData","isMissing","fileMissing","localDB","Dexie","wipeAllData","a","files","clear","appData","delete","importData","file","exportData","backup","importInto","Error","exportDB","blob","Blob","writeFile","ref","fileToArrayBuffer","data","add","message","readFile","get","dataObj","readAppData","output","JSON","parse","fileObjs","values","map","fileObj","writeAppData","stringify","put","Promise","resolve","reject","reader","FileReader","addEventListener","result","readAsArrayBuffer","AppData","handleFileObjsChange","fileObjsUpdate","lastModified","basedOn","changeLog","init","Subscriber","stateSetter","update","bind","Subscription","list","subscribe","unsubscribe","version","stores","onUpdate","rebase","log","push","func","assign","newAppData","op","filter","sub","activeNode","setActiveFileObjs","setNodesList","setActiveNode","__proto__","hasOwnProperty","fileObjDate","setToLatestNode","lastFileObj","sort","b","nodesListSubcription","nodes","path","head","activeFileObjs","fileObjsSubcription","from","to","getFileObjs","uploadsArr","upload","makeFileRef","checkedType","checkFileType","modified","now","activeDate","fObjsWithSameFile","fObj","getFile","removeFiles","segs","split","uploadsList","uploadsListSubcription","uploadFuncs","set","arr","submit","addFiles","cancel","deleteUpload","appendedUploads","uids","uploadMeta","newUploadsList","slice","index","findIndex","newUploads","newUploadsArr","newUploadCount","formatNewUpload","importTimeLine","module","exports","EditorBox","styled","div","Img","img","props","isGlobal","baseCss","css","theme","lightGrey","EditorForm","grey","Label","label","LineBreak","br","Select","select","Option","option","Input","input","TagLists","ul","Tag","li","darkGrey","DeleteBtn","span","greyBlue","red","DateAndTagsEditor","uploads","useState","isOpen","setIsOpen","user","formatForyyyyMMdd","time","formatForHHMM","setValues","Set","tag","setTags","handleCustomValueChange","target","value","cleanedValue","replace","newTags","userDatePlusTime","src","EditorIcon","onClick","ariaLabel","onChange","disabled","placeholder","onKeyPress","global","indexOf","removeTag","Wrapper","Note","offWhite","FileIcon","background","Options","OptionsContainer","FileContainer","Time","orange","blue","Link","FileNotFound","File","showTime","isMain","setFile","enableEditOptions","enableDownload","useRef","useEffect","refCurrent","current","observer","IntersectionObserver","entries","isIntersecting","then","url","URL","createObjectURL","unobserve","observe","DownloadWrapper","info","join","Math","pow","toFixed","enabled","title","href","download","children","className","selectedFile","includes","alt","opacity","nineDigitStr","i","charCodeAt","r","g","max255","numStr","parseInt","invertN","color","charsToColour","section","Node","lastTime","main","Header","header","PlusImg","StartHelp","Main","editMode","showUploads","setShowUploads","plusSign","obj","toDateString","getActiveNodeDate","greyBlueTransp","darkBlue","lightBlue","Line","Title","Year","Months","Month","Dates","DateItem","Gap","Bar","wide","ExpandButton","Timeline","showNodes","setShowNodes","nodesList","lastDate","scrollTo","scrollIntoView","behavior","inline","TimeLine","year","React","createRef","month","monthStr","totalBars","nodeDate","isActive","onLoad","openTimelineIcon","NavBarContainer","Logo","ButtonContainer","ToggleModalButton","MinusImg","EditModeButton","ImportButtonInput","ImportButtonLabel","ImportButtonIcon","ExportButtonContainer","HiddenDownloadLink","NavBar","setEditMode","downloadStatus","setDownloadStatus","downloadLinkRef","exportTimeLine","toString","click","logo","minusSign","EditButton","id","accept","htmlFor","ImportButton","ExportButton","_extends","arguments","source","call","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","transform","fill","width","height","_ref","svgRef","viewBox","ForwardRef","forwardRef","fontSize","fontFamily","x","y","ModalWindow","NotesForm","formControlBase","Button","button","NotesArea","textarea","AddNoteModal","close","notesTitle","setNotesTitle","notesBody","setNotesBody","hasNotes","UploadModalWrapper","AddedFiles","ModalTitle","h2","FileList","FileItem","FileName","p","DeleteButton","GlobalWrapper","ButtonGroup","ToolsGroups","AddNoteButton","FileUploadInput","FileUploadLabel","UploadModal","noteModalOpen","setNoteModalOpen","setUploads","modal","fileName","toLowerCase","aria-label","multiple","completionTick","veryDarkBlue","blueGradient","white","green","darkBlueTransp","GlobalStyle","createGlobalStyle","App","appTheme","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"0cAAe,SAASA,EAAaC,GACjCC,QAAQC,MAAMF,GCDH,SAASG,EAAT,GAA6F,IAAD,OAA1EC,EAA0E,EAA1EA,IAAKC,EAAqE,EAArEA,QAASC,EAA4D,EAA5DA,gBAAiBC,EAA2C,EAA3CA,WAAYC,EAA+B,EAA/BA,KAAMC,EAAyB,EAAzBA,KAAMC,EAAmB,EAAnBA,KAAMC,EAAa,EAAbA,KAAMC,EAAO,EAAPA,KAChGC,KAAKT,IAAMA,EACXS,KAAKN,WAAa,GAClBM,KAAKP,gBAAkBA,GAAmB,WAC1CO,KAAKL,KAAOA,GAAQ,GACpBK,KAAKR,QAAUA,EACfQ,KAAKH,KAAOA,EACZG,KAAKF,KAAOA,GAAQ,GACpBE,KAAKJ,KAAOA,EACZI,KAAKD,KAAOA,EACZE,OAAOC,KAAKR,GAAYS,SAAQ,SAAAC,GAAG,OAAI,EAAKV,WAAWU,GAAO,EAAKC,WAAWX,EAAWU,OAE7Fd,EAAQgB,UAAUD,WAAa,SAASE,GACpC,GAAIP,KAAKQ,eAAeD,GACpB,OAAOA,EAEX,IAAME,EAAmB,SAAAC,GACrB,IAAMC,EAAMD,EAAE,GACd,OAAsB,IAAfC,EAAIC,OAAe,IAAID,EAAMA,GAElCE,EAAI,IAAIC,KAAKP,GACnB,OAAOM,EAAEE,cACLN,EAAiBI,EAAEG,WAAW,GAC9BP,EAAiBI,EAAEI,WACnBR,EAAiBI,EAAEK,YACnBT,EAAiBI,EAAEM,cACnBV,EAAiBI,EAAEO,eAE3B9B,EAAQgB,UAAUe,aAAe,SAASC,GACtC,GAAItB,KAAKQ,eAAec,GAAO,CAC3B,IAAMC,EAAMD,EAAKV,OACjB,MAAM,GAAN,OAAUW,EAAM,GAAKD,EAAKE,OAAO,EAAE,IAAnC,OAAwCD,EAAM,GAAK,IAAID,EAAKE,OAAO,EAAE,IAArE,OAA0ED,EAAM,GAAK,IAAID,EAAKE,OAAO,EAAE,IAAvG,OAA4GD,EAAM,GAAK,IAAID,EAAKE,OAAO,EAAE,IAAzI,OAA8ID,EAAM,IAAM,IAAID,EAAKE,OAAO,GAAG,IAA7K,OAAkLD,EAAM,IAAM,IAAID,EAAKE,OAAO,GAAG,IAGjNpC,QAAQC,MAAMiC,EAAK,oBAG3BhC,EAAQgB,UAAUE,eAAiB,SAASc,GACxC,QAAyB,kBAATA,GAAqBA,EAAKG,MAAM,OAAyB,KAAhBH,EAAKV,SAElEtB,EAAQgB,UAAUoB,cAAgB,WAC9B,OAAO1B,KAAKN,WAAWM,KAAKP,kBAEhCH,EAAQgB,UAAUqB,cAAgB,SAAS9B,EAAMU,GAC7CP,KAAKP,gBAAkBI,EACvBG,KAAKN,WAAWG,GAAQG,KAAKK,WAAWE,IAE5CjB,EAAQgB,UAAUsB,gBAAkB,WAA4B,IAAnBC,IAAkB,yDAC3D7B,KAAK8B,YAAcD,G,YC3CjBE,EAAU,IAAIC,IAAM,a,SAMXC,I,2EAAf,sBAAAC,EAAA,sEACUH,EAAQI,MAAMC,QADxB,uBAEUL,EAAQM,QAAQD,QAF1B,uBAGUL,EAAQI,MAAMG,OAAO,WAH/B,uBAIUP,EAAQM,QAAQC,OAAO,SAJjC,iCAKW,GALX,4C,+BAQeC,E,8EAAf,WAA0BC,GAA1B,eAAAN,EAAA,+EAE6BO,IAF7B,cAEcC,EAFd,yBAIkBT,IAJlB,uBAKkBU,YAAWZ,EAASS,GALtC,iCAMmB,GANnB,mDASkBP,IATlB,eAUYM,EAAWG,GACXxD,EAAa,EAAD,IAXxB,mBAYmB,GAZnB,gEAeQA,EAAa,EAAD,IACN0D,MAAM,0CAhBpB,kE,+BAoBeH,I,2EAAf,8BAAAP,EAAA,+EAE2BW,YAASd,GAFpC,cAEce,EAFd,gBAG2B,IAAIC,KAAK,CAACD,GAAO,CAAClD,KAAM,qBAHnD,cAGc4C,EAHd,yBAIeA,GAJf,yCAOQtD,EAAa,EAAD,IAPpB,mF,+BAYe8D,E,gFAAf,WAAyBC,EAAKT,GAA9B,eAAAN,EAAA,+EAE2BgB,EAAkBV,GAF7C,cAEcW,EAFd,gBAGcpB,EAAQI,MAAMiB,IAAI,CAACH,MAAKE,KAAM,CAACL,KAAMK,EAAMvD,KAAM4C,EAAK5C,QAHpE,iCAIe,GAJf,mCAO0B,4CAAd,KAAEyD,QAPd,kBAQ8B,EAR9B,kDAWuB,GAXvB,gCAeYnE,EAAa,EAAD,IAfxB,0D,+BAoBeoE,E,8EAAf,WAAwBL,GAAxB,eAAAf,EAAA,+EAE4BH,EAAQI,MAAMoB,IAAIN,GAF9C,UAEYO,EAFZ,6BAIkB,IAAIZ,MAAJ,sCAAyCK,EAAzC,OAJlB,gCAMe,IAAIF,KAAK,CAACS,EAAQL,KAAKL,MAAO,CAAClD,KAAO4D,EAAQL,KAAKvD,QANlE,gCASQV,EAAa,EAAD,IATpB,0D,+BAYeuE,I,2EAAf,gCAAAvB,EAAA,+EAE4BH,EAAQM,QAAQkB,IAAI,GAFhD,cAEYlB,EAFZ,OAGYqB,GAAS,EACTrB,IACAqB,EAASC,KAAKC,MAAMvB,EAAQc,MACtBU,EAAW5D,OAAO6D,OAAOJ,EAAOG,UAAUE,KAAI,SAAAZ,GAAI,OAAI,IAAI7D,EAAJ,eAAgB6D,OAC5EO,EAAOG,SAAW,GAClBA,EAAS1D,SAAQ,SAAA6D,GAAO,OAAIN,EAAOG,SAASG,EAAQzE,KAAOyE,MARvE,kBAUeN,GAVf,gCAaQxE,EAAa,EAAD,IAbpB,0D,+BAgBe+E,E,8EAAf,WAA4B5B,GAA5B,eAAAH,EAAA,sEAEciB,EAAOQ,KAAKO,UAAU7B,GAFpC,SAGcN,EAAQM,QAAQ8B,IAAI,CAAClB,IAAK,EAAGE,SAH3C,iCAIe,GAJf,gCAOQjE,EAAa,EAAD,IAPpB,0D,sBAWA,SAASgE,EAAkBV,GACvB,IAAMM,EAAO,IAAIC,KAAK,CAACP,IACvB,OAAO,IAAI4B,SAAQ,SAACC,EAASC,GACzB,IAAMC,EAAS,IAAIC,WACnBD,EAAOE,iBAAiB,WAAW,SAACtF,GAChCkF,EAAQE,EAAOG,WAEnBH,EAAOE,iBAAiB,QAASH,GACjCC,EAAOI,kBAAkB7B,MCrHlB,SAAS8B,EAAQC,GAC5B7E,KAAK8E,eAAiBD,EACtB7E,KAAK+E,aAAe,KACpB/E,KAAKgF,QAAU,KACfhF,KAAKiF,UAAY,GACjBjF,KAAK6D,SAAW,GAChB7D,KAAKkF,OCPM,SAASC,EAAWC,GAC/BpF,KAAKoF,YAAcA,EACnBpF,KAAKqF,OAASrF,KAAKqF,OAAOC,KAAKtF,MCApB,SAASuF,IACpBvF,KAAKwF,KAAO,GACZxF,KAAKyF,UAAYzF,KAAKyF,UAAUH,KAAKtF,MACrCA,KAAKqF,OAASrF,KAAKqF,OAAOC,KAAKtF,MAC/BA,KAAK0F,YAAc1F,KAAK0F,YAAYJ,KAAKtF,MHA7C+B,EAAQ4D,QAAQ,GAAGC,OAAO,CACtBvD,QAAS,MACTF,MAAO,QCCXyC,EAAQtE,UAAUuF,SAAW,WACzB7F,KAAK8E,iBACLb,EAAajE,OAEjB4E,EAAQtE,UAAU4E,KAAlB,sBAAyB,4BAAAhD,EAAA,sEACFuB,IADE,QACfN,EADe,UAGjBnD,KAAKoC,QACLpC,KAAK8F,OAAO3C,IAJK,gDAOzByB,EAAQtE,UAAU8C,IAAM,SAASY,GAAsB,IAAb+B,IAAY,yDAClDA,GAAO/F,KAAKiF,UAAUe,KAAK,CAAEC,KAAM,MAAO9C,KAAMa,IAChDhE,KAAK6D,SAASG,EAAQzE,KAAOyE,EAC7BhE,KAAK6F,YAETjB,EAAQtE,UAAU+E,OAAS,SAASrB,GAAsB,IAAb+B,IAAY,yDACrDA,GAAO/F,KAAKiF,UAAUe,KAAK,CAAEC,KAAM,SAAU9C,KAAMa,IACnD/D,OAAOiG,OAAOlG,KAAK6D,SAASG,EAAQzE,KAAMyE,GAC1ChE,KAAK6F,YAETjB,EAAQtE,UAAUgC,OAAS,SAAS/C,GAAkB,IAAbwG,IAAY,yDACjDA,GAAO/F,KAAKiF,UAAUe,KAAK,CAAEC,KAAM,SAAU9C,KAAM5D,WAC5CS,KAAK6D,SAAStE,GACrBS,KAAK6F,YAETjB,EAAQtE,UAAUwF,OAAS,SAASK,GAChCnG,KAAKgF,QAAUmB,EAAWpB,aAC1B/E,KAAK6D,SAAWsC,EAAWtC,SAFiB,oBAG7B7D,KAAKiF,WAHwB,IAG5C,2BAA+B,CAAC,IAAvBmB,EAAsB,QAC3BpG,KAAKoG,EAAGH,MAAMG,EAAGjD,MAAM,IAJiB,8BAM5CnD,KAAKiF,UAAY,GACjBjF,KAAK6F,YAETjB,EAAQtE,UAAU8B,MAAQ,WACtBpC,KAAK+E,aAAe,KACpB/E,KAAKgF,QAAU,KACfhF,KAAKiF,UAAY,GACjBjF,KAAK6D,SAAW,GAChB7D,KAAK6F,YC7CTV,EAAW7E,UAAU+E,OAAS,SAASlC,GACnCnD,KAAKoF,YAAYjC,ICGrBoC,EAAajF,UAAUmF,UAAY,SAASL,GACxCpF,KAAKwF,KAAKQ,KAAK,IAAIb,EAAWC,KAElCG,EAAajF,UAAUoF,YAAc,SAASN,GAC1CpF,KAAKwF,KAAOxF,KAAKwF,KAAKa,QAAO,SAAAC,GAAG,OAAIA,EAAIlB,cAAgBA,MAE5DG,EAAajF,UAAU+E,OAAS,SAASlC,GACrCnD,KAAKwF,KAAKrF,SAAQ,SAAAmG,GAAG,OAAIA,EAAIjB,OAAOlC,OCRxC,IAMIoD,EANElE,EAAU,IAAIuC,G,yFACpB,sBAAA1C,EAAA,sDACIsE,IACAC,IAFJ,4C,sBAMA,SAASC,EAAc1C,GACnB,GAAIA,GAAWA,EAAQ2C,UAAUC,eAAe,iBAAkB,CAC9D,IAAMC,EAAc7C,EAAQtC,gBACxBmF,IACAN,EAAaM,EAAYrF,OAAO,EAAG,GACnCgF,UAIJtH,EAAa0D,MAAM,gCAAD,OAAiCe,KAAKO,UAAUF,MAG1E,SAAS8C,IACL,IAAMC,EAAc9G,OAAO6D,OAAOzB,EAAQwB,UAAUmD,MAAK,SAAC9E,EAAG+E,GAAJ,OAAUA,EAAEvF,gBAAkBQ,EAAER,mBAAiB,GAC1GqF,GAAeL,EAAcK,GAIjC,IAAMG,EAAuB,IAAI3B,EACjC,SAASkB,IAIL,IAHA,IAAgBlG,EAEV4G,EAAQ,GACd,MAFiBlH,OAAO6D,OAAOzB,EAAQwB,UAEvC,eAA8B,CAAzB,IAAyB,EAArBG,EAAO,KACNoD,EAJc,EAAR7G,EAISyD,EAAQtC,gBAAgBF,OAAO,EAAG,IAJrBA,OAAO,EAAE,IAAvB,mBAA8BjB,EAASiB,OAAO,GAAGC,MAAM,WAKvE4F,EAAOF,EAFe,cAGVC,GAHU,IAG1B,2BAAsB,CAAC,IAAdhH,EAAa,QACbiH,EAAKT,eAAexG,KACjBA,IAAQgH,EAAKA,EAAKxG,OAAO,GACzByG,EAAKjH,GAAO,GAGZiH,EAAKjH,GAAO,IAGpBiH,EAAOA,EAAKjH,IAZU,8BAc1BiH,EAAKrB,KAAKhC,GAEdkD,EAAqB7B,OAAO8B,GAGhC,IAAIG,EAAiB,GACfC,EAAsB,IAAIhC,EAChC,SAASiB,IACAD,GAMDe,EAUR,WAA4C,IAAvBE,EAAsB,uDAAf,IAAKC,EAAU,uDAAL,IAClC,OAAOxH,OAAO6D,OAAOzB,EAAQwB,UAAUwC,QAAO,SAAArC,GAC1C,IAAM5D,EAAM4D,EAAQtC,gBACpB,OAAQtB,EAAIoB,OAAO,EAAGgG,EAAK5G,SAAW4G,GAAQpH,EAAIoB,OAAO,EAAGiG,EAAG7G,SAAW6G,KAC3ET,MAAK,SAAC9E,EAAG+E,GAAJ,OAAU/E,EAAER,gBAAkBuF,EAAEvF,mBAdnBgG,CAFNnB,EAAW,SACbA,EAAW,WAED3F,OAAS,EACxB2G,EAAoBlC,OAAOiC,IAG3BC,EAAoBlC,OAAO,IAC3ByB,KAXJA,I,4CAsBR,WAAwBa,GAAxB,qBAAAzF,EAAA,oEAEuByF,GAFvB,aAAAzF,EAAA,oDAAAA,EAAA,yDAEa0F,EAFb,QAGc3E,EAAM4E,EAAYD,EAAOpF,MAHvC,EAIwCoF,EAAOpF,KAAhC3C,EAJf,EAIeA,KAJf,IAIqBC,YAJrB,MAI4B,GAJ5B,EAIgCF,EAJhC,EAIgCA,KAClBkI,EAAcC,EAAcnI,EAAMC,GACnC+H,EAAOhB,eAAe,gBACvBgB,EAAOlI,WAAa,IAExBkI,EAAOlI,WAAWsI,SAAWJ,EAAOpF,KAAKuC,cAAgBjE,KAAKmH,MAC9DjE,EAAU,IAAI1E,EAAJ,eAAgBsI,EAAhB,CAAwB/H,OAAMC,OAAMN,QAASyD,EAAKrD,KAAMkI,EAAa/H,KAAM6H,EAAOpF,KAAKzC,QAC3FmI,EAAalE,EAAQtC,gBAE0D,KAD/EyG,EAAoBlI,OAAO6D,OAAOzB,EAAQwB,UAAUwC,QAAO,SAAA+B,GAAI,OAAIA,EAAK5I,UAAYyD,MACpEoD,QAAO,SAAA+B,GAAI,OAAIA,EAAK1G,kBAAoBwG,KAAYtH,SACtEyB,EAAQwB,SAASG,EAAQzE,KAAOyE,KAEhCmE,EAAkB9B,QAAO,SAAA+B,GAAI,OAAKA,EAAKtG,eAAalB,OAAS,GAhBzE,wBAiBYuH,EAAkBhI,SAAQ,SAAAiI,GAAI,OAAIA,EAAKtG,aAAesG,EAAKxG,iBAAgB,MAjBvF,UAkBkBoB,EAAUC,EAAK2E,EAAOpF,MAlBxC,2RAqBUyB,EAAa5B,GArBvB,eAsBIqE,EAAc1C,GACdyC,IAvBJ,mBAwBW,GAxBX,iE,+BA2Be4B,E,8EAAf,WAAuB7I,GAAvB,eAAA0C,EAAA,+EAEyBoB,EAAS9D,GAFlC,UAEYgD,EAFZ,6BAOkB,IAAII,MAAJ,yBAA4BpD,EAA5B,gBAPlB,gCASegD,GATf,kCAYQtD,EAAa,EAAD,IAZpB,2D,sBAgBA,SAASoJ,EAAYzE,GACjBA,EAAS1D,SAAQ,SAAA6D,GACb,IAAI5D,EAAM4D,EAAQzE,IAClB,OAAI8C,EAAQwB,SAASzD,IACrBiC,EAAQC,OAAOlC,IACR,GAEJwC,MAAM,2BAAD,OAA4BxC,OAI5C,SAASyH,EAAYrF,GACjB,OAAOA,EAAK3C,KAAK2C,EAAKzC,KAAKyC,EAAKuC,aAGpC,SAASgD,EAAcnI,EAAMC,GACzB,IAAKD,EAAM,CACP,IAAM2I,EAAO1I,EAAK2I,MAAM,KACxB,OAAID,EAAK3H,OAAS,EACP2H,EAAKA,EAAK3H,OAAO,GAGjB,UAGf,OAAOhB,EAGX,IAAI6I,EAAc,GACZC,EAAyB,IAAInD,EAC7BoD,EAAc,CAChBlD,UAAW,SAASL,EAAa7F,GAC7BmJ,EAAuBjD,UAAUL,EAAa7F,GAC9CoJ,EAAYC,IAAIH,IAEpB/C,YAAagD,EAAuBhD,YACpCkD,IAAK,SAAwBC,GACzBJ,EAAcI,EACdH,EAAuBrD,OAAOoD,IAElCK,OAAQ,Y,oCACJC,CAASN,GACTE,EAAYC,IAAI,KAEpBI,OAAQ,kBAAML,EAAYC,IAAI,KAC9BK,aAAc,SAAsB1J,GAChC,IAAM2J,EAAkBT,EAAYpC,QAAO,SAAAuB,GAAM,OAAIA,EAAOrI,MAAQA,KACpEoJ,EAAYC,IAAIM,IAEpB7D,OAAQ,SAA2B8D,EAAMC,GACrC,IADiD,EAC3CC,EAAiBZ,EAAYa,MAAM,GADQ,cAEjCH,GAFiC,yBAExC5J,EAFwC,QAGvCgK,EAAQF,EAAeG,WAAU,SAAA5B,GAAM,OAAIA,EAAOrI,MAAQA,KAChEU,OAAOiG,OAAOmD,EAAeE,GAA7BtJ,OAAA,IAAAA,CAAA,GAAyCmJ,EAAzC,CAAqDzJ,KAAMyJ,EAAWzJ,MAAQ,OAFlF,2BAAuB,IAF0B,8BAMjDgJ,EAAYC,IAAZ,YAAoBS,KAExBjG,IAAK,SAA0BqG,GAC3B,IAAMC,EAAgBzJ,OAAO6D,OAAO2F,GAAY1F,KAAI,SAAA6D,GAAM,OAMlE,SAAyBA,GAErB,MAAQ,CACJrI,IAFYuB,KAAKmH,MAEJ,GAAD,SAAM0B,GAClBnH,KAAMoF,GAVwDgC,CAAgBhC,MAC9Ee,EAAYC,IAAZ,sBAAoBH,GAApB,YAAoCiB,OAIxCC,EAAiB,E,SAoBNE,E,8EAAf,WAA8BrH,GAA9B,SAAAN,EAAA,sEACUK,EAAWC,GADrB,cAEIH,EAAQ6C,OAFZ,mBAGW,GAHX,4C,gDChNA4E,EAAOC,QAAU,IAA0B,sC,4pDCKnC1E,E,KAAWsD,EAAXtD,OAEF2E,EAAYC,IAAOC,IAAV,KAITC,EAAMF,IAAOG,IAAV,KACE,SAAAC,GAAK,OAAIA,EAAMC,SAAW,QAAU,UAGzCC,EAAUC,YAAH,KAIG,SAAAH,GAAK,OAAIA,EAAMI,MAAMC,aAG/BC,EAAaV,IAAOC,IAAV,KAIA,SAAAG,GAAK,OAAIA,EAAMI,MAAMG,QAQ/BC,EAAQZ,IAAOa,MAAV,KACLC,EAAYd,IAAOe,GAAV,KAETC,EAAShB,IAAOiB,OAAV,IACVX,GAGIY,EAASlB,IAAOmB,OAAV,IACVb,GAGIc,EAAQpB,IAAOqB,MAAV,IACTf,GACE,SAAAF,GAAK,MAAmB,SAAfA,EAAMzK,MAAmB4K,YAAzB,QAKPe,EAAWtB,IAAOuB,GAAV,KAIRC,EAAMxB,IAAOyB,GAAV,KACE,SAAArB,GAAK,OAAIA,EAAMI,MAAMC,aAChB,SAAAL,GAAK,OAAIA,EAAMI,MAAMkB,YAQ/BC,EAAY3B,IAAO4B,KAAV,KAEJ,SAAAxB,GAAK,OAAIA,EAAMI,MAAMqB,YAMnB,SAAAzB,GAAK,OAAIA,EAAMI,MAAMsB,OAmHnBC,IA/Gf,YAA2D,IAA9BC,EAA6B,EAA7BA,QAA6B,IAApB3B,gBAAoB,SAClDnB,EAAO8C,EAAQlI,KAAI,SAAA6D,GAAM,OAAIA,EAAOrI,OADc,EAE5B2M,oBAAS,GAFmB,mBAEjDC,EAFiD,KAEzCC,EAFyC,OAG5BF,mBAAS,CACnCzM,gBAAiBwM,EAAQxM,iBAAmB,WAC5C4M,KAAOJ,EAAQvM,YAAcuM,EAAQvM,WAAW2M,MAASC,EAAkBxL,KAAKmH,OAChFD,SAAWiE,EAAQ,GAAGzJ,MAAQyJ,EAAQ,GAAGzJ,KAAKuC,cAAkBkH,EAAQvM,YAAcuM,EAAQvM,WAAWsI,UAAalH,KAAKmH,MAC3HsE,KAAMC,EAAeP,EAAQvM,YAAcuM,EAAQvM,WAAW2M,MAASvL,KAAKmH,QAAU,QACtFtI,KAAMsM,EAAQtM,MAAQ,KARgC,mBAGjDmE,EAHiD,KAGzC2I,EAHyC,OAUhCP,mBAAS,YAAI,IAAIQ,IAAIT,EAAQlI,KAAI,SAAA6D,GAAM,OAAIA,EAAO+E,OAAKtG,QAAO,SAAAsG,GAAG,OAAIA,QAVrC,mBAUjDhN,EAViD,KAU3CiN,EAV2C,KAalDC,EAA0B,SAAA1N,GAAM,IAAD,EACbA,EAAE2N,OAAlBjN,EAD6B,EAC7BA,KAAMkN,EADuB,EACvBA,MACZ,GAAa,SAATlN,EAAiB,CACnB,GAAIkN,EAAMtL,MAAM,OAAmB,UAAVtC,EAAEiB,IAAiB,CAC1C,IAAM4M,EAAeD,EAAME,QAAQ,eAAgB,IACnD,GAAqB,KAAjBD,EAAqB,CACvB,IAAME,EAAO,YAAO,IAAIR,IAAJ,sBAAY/M,GAAZ,CAAkBqN,MACtCJ,EAAQM,GACR7H,EAAO8D,EAAM,CAAExJ,KAAMuN,IAEvBH,EAAQ,GAEVN,EAAU,eAAK3I,EAAN,CAAcnE,KAAMoN,KAE/B,GAAa,SAATlN,EAAiB,CACnB4M,EAAU,eAAK3I,EAAN,CAAcuI,KAAMU,EAAOtN,gBAAiB,UACrD,IAAM0N,EAAmBb,EAAkBS,GAAO,IAAIP,EAAc1I,EAAM,MACpEqJ,GACJ9H,EAAO8D,EAAM,CAAC1J,gBAAiB,OAAQC,WAAY,CAAE2M,KAAMc,UAG1D,GAAa,SAATtN,EAAiB,CACxB4M,EAAU,eAAK3I,EAAN,CAAcyI,KAAMQ,KAC7B,IAAMI,EAAmBb,EAAkBxI,EAAM,MAAU,IAAI0I,EAAcO,GACzEI,GACF9H,EAAO8D,EAAM,CAACzJ,WAAY,CAAE2M,KAAMc,SAGpB,oBAATtN,IACP4M,EAAU,eAAK3I,EAAN,CAAcrE,gBAAiBsN,KACxC1H,EAAO8D,EAAM,CAAC1J,gBAAiBsN,IACjB,SAAVA,GACF1H,EAAO8D,EAAM,CAACzJ,WAAY,CAAE2M,KAAMvI,EAAOuI,UAK/C,OACE,kBAACrC,EAAD,KACE,kBAACG,EAAD,CAAKiD,IAAKC,IAAY/C,SAAUA,EAC9BgD,QAAS,kBAAMlB,GAAqB,IAAXD,MAE1BA,GACC,kBAACxB,EAAD,KACE,kBAACM,EAAD,CAAQpL,KAAK,kBAAkB0N,UAAU,qBAAqBC,SAAUX,EAAyBE,MAAOjJ,EAAOrE,iBAC7G,kBAAC0L,EAAD,CAAQ4B,MAAM,YAAd,iBACA,kBAAC5B,EAAD,CAAQ4B,MAAM,QAAd,gBAEF,kBAAChC,EAAD,MACwB,aAA3BjH,EAAOrE,gBAAiC,oCACvC,kBAAC4L,EAAD,CACIzL,KAAK,OACLmN,MAAOT,EAAkBxI,EAAOkE,UAChCwF,SAAUX,EACVY,UAAQ,IAEZ,kBAACpC,EAAD,CACEzL,KAAK,OACLmN,MAAOP,EAAc1I,EAAOkE,UAC5BwF,SAAUX,EACVY,UAAQ,KAGR,oCACE,kBAACpC,EAAD,CACIzL,KAAK,OACLC,KAAK,OACLkN,MAAOT,EAAkBxI,EAAOuI,MAChCmB,SAAUX,IAEd,kBAACxB,EAAD,CACEzL,KAAK,OACLC,KAAK,OACLkN,MAAOP,EAAc1I,EAAOyI,MAC5BiB,SAAUX,KAGd,kBAAC9B,EAAD,MACI,kBAACF,EAAD,aACE,kBAACQ,EAAD,CACEzL,KAAK,OACLC,KAAK,OACLkN,MAAQjJ,EAAOnE,KACf+N,YAAY,gBACZF,SAAUX,EACVc,WAAYd,KAGhB,kBAAC9B,EAAD,MACJ,kBAACQ,EAAD,MACIqC,GAAUjO,EAAKoE,KAAI,SAAA4I,GAAG,OAAI,kBAAClB,EAAD,CAAKrL,IAAKuM,GAAMA,EAAI,kBAACf,EAAD,CAAW2B,UAAU,aAAaD,QAAW,kBA5FrF,SAAAX,GAAG,OAAIC,EAAQ,GAAD,mBAAMjN,EAAK2J,MAAM,EAAG3J,EAAKkO,QAAQlB,KAAjC,YAA2ChN,EAAK2J,MAAM3J,EAAKkO,QAAQlB,GAAK,MA4FKmB,CAAUnB,KAA7D,gBAU5D,IAAMlM,EAAmB,SAAAC,GACvB,IAAMC,EAAMD,EAAE,GACd,OAAsB,IAAfC,EAAIC,OAAe,IAAID,EAAMA,GAEtC,SAAS2L,EAAkBhL,GACzB,IAAMT,EAAI,IAAIC,KAAKQ,GACboC,EAAS7C,EAAEE,cAAgB,IAC7BN,EAAiBI,EAAEG,WAAW,GAAK,IACnCP,EAAiBI,EAAEI,WACvB,OAAIyC,EAAOjC,MAAM,uBACRiC,EAGApC,EAIX,SAASkL,EAAclL,GACrB,IAAMT,EAAI,IAAIC,KAAKQ,GACboC,EAASjD,EAAiBI,EAAEK,YAAc,IAChDT,EAAiBI,EAAEM,cACnB,OAAIuC,EAAOjC,MAAM,eACRiC,EAGApC,K,uCCxNXwI,EAAOC,QAAU,IAA0B,yC,mBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,4C,wnECK3C,IAAMgE,EAAU9D,IAAOC,IAAV,KAKPC,EAAMF,IAAOG,IAAV,KAGH4D,EAAO/D,YAAO8D,EAAP9D,CAAH,KACQ,SAAAI,GAAK,OAAIA,EAAMI,MAAMwD,YAG1B,SAAA5D,GAAK,OAAIA,EAAMI,MAAMkB,YAEjB,SAAAtB,GAAK,OAAIA,EAAMI,MAAMkB,YAGhCuC,EAAWjE,IAAOC,IAAV,KAII,SAAAG,GAAK,OAAIA,EAAM8D,cACpB,SAAA9D,GAAK,OAAIA,EAAMI,MAAMkB,YAK5ByC,EAAUnE,IAAOC,IAAV,KAKW,SAAAG,GAAK,OAAIA,EAAMI,MAAMqB,YAK9B,SAAAzB,GAAK,OAAIA,EAAMI,MAAMwD,YAChB,SAAA5D,GAAK,OAAIA,EAAMI,MAAMsB,OAInCsC,EAAmBpE,IAAOC,IAAV,KAOhBoE,EAAgBrE,IAAOC,IAAV,KAebqE,EAAOtE,IAAOsC,KAAV,KACG,SAAAlC,GAAK,OAAIA,EAAMI,MAAM+D,UAEL,SAAAnE,GAAK,OAAIA,EAAMI,MAAMgE,QAI5CC,EAAOzE,IAAO/H,EAAV,KAOJyM,EAAe1E,IAAOC,IAAV,KAIA,SAAAG,GAAK,OAAIA,EAAMI,MAAMsB,OAC1B,SAAA1B,GAAK,OAAIA,EAAMI,MAAMwD,YAMnB,SAASW,EAAT,GAAkD,IAAnC5K,EAAkC,EAAlCA,QAAS6K,EAAyB,EAAzBA,SAAUtC,EAAe,EAAfA,KAAMuC,EAAS,EAATA,OAAS,EACpC5C,mBAASwB,KAD2B,mBACrDlL,EADqD,KAC/CuM,EAD+C,KAEtDC,EAAoBF,EACpBG,EAAiBH,EAOvB,IAAM7L,EAAMiM,iBAAO,MAEnBC,qBAAU,WACN,IAAMC,EAAanM,EAAIoM,QACvB,GAAIpM,EAAIoM,QAAS,CACb,IAAIC,EAAW,IAAIC,sBAAqB,SAAAC,GAChCA,EAAQ,GAAGC,gBACXpH,YAAQrE,EAAQxE,SAASkQ,MAAK,SAAA5M,GAC1B,IAAI6M,EAAM,KACN7M,IACA6M,EAAMC,IAAIC,gBAAgB/M,IAE9BiM,EAAQY,GACI,OAARA,GACA3L,EAAQpC,kBAEZ0N,EAASQ,UAAU7M,EAAIoM,eAKnC,OADAC,EAASS,QAAQ9M,EAAIoM,SACd,kBAAMC,EAASQ,UAAUV,OAErC,CAACnM,EAAKe,EAASA,EAAQlC,cAE1B,IAAMkO,EAAkB,SAAA3F,GAAU,IAAD,EACRtK,EACvBkQ,EAAI,YACRjM,EAAQnE,KADA,2BAEKmE,EAAQ3C,aAAa2C,EAAQtE,WAAWsI,UAF7C,cAGRhE,EAAQtE,WAAW2M,KAAO,gBAAgBrI,EAAQ3C,aAAa2C,EAAQtE,WAAW2M,MAAM,KAAO,GAHvF,iBAGkGrI,EAAQpE,KAH1G,cAIR,UAAAoE,EAAQ2I,WAAR,eAAa/L,QAAS,EAAI,SAASoD,EAAQrE,KAAKuQ,KAAK,KAAK,KAAO,IAJzD,OAI8DlM,EAAQjE,KAAO,WAL1DA,EAKgFiE,EAAQjE,MALzE,IAAOA,EAAK,IAAMA,EAAOoQ,KAAKC,IAAI,GAAI,IAAMrQ,EAAK,KAAMsQ,QAAQ,GAAG,KAAOtQ,EAAOoQ,KAAKC,IAAI,GAAI,IAAMrQ,EAAKoQ,KAAKC,IAAI,GAAI,IAAIC,QAAQ,GAAG,MAAQtQ,EAAKoQ,KAAKC,IAAI,GAAI,IAAIC,QAAQ,GAAG,MAK9F,KAAO,GAJxH,YAOF,OAAIhG,EAAMiG,QACC,kBAAC5B,EAAD,CAAM6B,MAAON,EAAMO,KAAMhO,EAAMiO,SAAUzM,EAAQnE,MACnDwK,EAAMqG,UAGRrG,EAAMqG,UAGjB,OAAI1M,EAEI,kBAACsK,EAAD,CAAerL,IAAKA,GACf4L,GAAY,kBAACN,EAAD,CAAMhO,SAAUgM,GAAOA,GACnCyC,GACD,kBAACX,EAAD,CAAkBsC,UAAU,gBACxB,kBAACvC,EAAD,CAASd,QArDzB,WACI,IAAIsD,EAAe5M,EACnBsE,YAAY,CAACsI,MAmDD,SAGM,OAATpO,EAAgB,kBAACmM,EAAD,4CAAmD3K,EAAQnE,MAC5E,kBAACmQ,EAAD,CAAiBM,QAASrB,GACrBjL,EAAQpE,KAAKiR,SAAS,SACnB,kBAAC1G,EAAD,CAAKiD,IAAK5K,EAAMsO,IAAI,KACH,SAAjB9M,EAAQpE,KAAkB,kBAACoO,EAAD,CAAM2C,UAAU,QAAO,4BAAK3M,EAAQnE,MAAU,2BAAImE,EAAQlE,OACpF,kBAACoO,EAWzB,SAAuBvN,GAAqB,IAAhBoQ,EAAe,uDAAL,GAC9BC,EAAe,GACfC,EAAI,EACR,KAAMD,EAAapQ,OAAS,GACxBoQ,GAAgBrQ,EAAIuQ,WAAWD,EAAEtQ,EAAIC,QACrCqQ,IALmC,MAOzBD,EAAavP,MAAM,SAPM,mBAOlC0P,EAPkC,KAOhCC,EAPgC,KAO9BnK,EAP8B,KAQjCoK,EAAS,SAAAC,GAAM,OAAIC,SAASD,EAAQ,IAAI,KACxCE,EAAU,SAAAF,GAAM,OAAI,IAAMD,EAAOC,IACvC,MAAO,CAACnD,WAAW,QAAD,OAAUkD,EAAOF,GAAjB,YAAuBE,EAAOD,GAA9B,YAAoCC,EAAOpK,GAA3C,YAAiD8J,EAAjD,KAA6DU,MAAM,OAAD,OAASD,EAAQL,GAAjB,YAAuBK,EAAQJ,GAA/B,YAAqCI,EAAQvK,GAA7C,MArBlDyK,CAAc1N,EAAQpE,MAAQoE,EAAQnE,QAO7D,kBAAC8O,EAAD,8B,qMCnKf,IAAMZ,EAAU9D,IAAO0H,QAAV,KAQE,SAASC,EAAT,GAA6C,IAA7B/N,EAA4B,EAA5BA,SAA4B,IAAlBiL,cAAkB,SACnD+C,EAAW,GACXnO,EAAS,GAYb,OAXIG,IACAH,EAASG,EAASE,KAAI,SAAAC,GAClB,IAAI6K,EAAWC,EACf,GAAIA,EAAQ,CACR,IAAIvC,EAAOvI,EAAQtC,gBAAgBF,OAAO,GAAGC,MAAM,SAASyO,KAAK,KACjErB,EAAWtC,IAASsF,EACpBA,EAAWtF,EAEf,OAAO,kBAACqC,EAAD,eAAMxO,IAAK4D,EAAQzE,KAAS,CAACyE,UAAS6K,WAAUtC,OAAMuC,gBAIjE,kBAAC,EAAD,KACKpL,G,2gCCtBb,IAAMqK,EAAU9D,IAAO6H,KAAV,KAsBF,SAAAzH,GAAK,OAAIA,EAAMI,MAAMkB,YAE1BoG,EAAS9H,IAAO+H,OAAV,KAIE,SAAA3H,GAAK,OAAIA,EAAMI,MAAM+D,UAG7ByD,EAAUhI,IAAOG,IAAV,KASP8H,EAAYjI,IAAOC,IAAV,KAkDAiI,MAvCf,YAAyD,IAA1CC,EAAyC,EAAzCA,SAAUC,EAA+B,EAA/BA,YAAaC,EAAkB,EAAlBA,eAAkB,EACVpG,mBAAS,MADC,mBAC/C5E,EAD+C,KAC/Bd,EAD+B,KAEtD2I,qBAAU,WAER,OADA5H,IAAoB9B,UAAUe,GACvB,kBAAMe,IAAoB7B,YAAYc,MAC5C,IASH,IAAI9C,EAAU,oCACZ,kBAACqO,EAAD,KACE,kBAACG,EAAD,KACA,wCACA,kBAACD,EAAD,CAAS3E,QAAS,kBAAMgF,GAAe,IAAOlF,IAAKmF,IAAUzB,IAAI,oCACjE,2DAaJ,OATIxJ,GAAkBA,EAAe1G,OAAS,IAC5C8C,EAAS,oCACT,kBAACqO,EAAD,KACE,8BAnBJ,WACE,IAAMS,EAAMlL,EAAe,GAC3B,GAAGkL,EACD,OAAO,IAAI1R,KAAK0R,EAAInR,aAAamR,EAAI9Q,iBAAiBF,OAAO,EAAG,KAAKiR,eAgB9DC,KAET,kBAACd,EAAD,CAAM/N,SAAUyD,EAAgBwH,QAAM,MAKtC,kBAAC,EAAD,CAAS6B,UAAWyB,EAAW,UAAYC,EAAc,SAAW,IACjE3O,I,8wGCrFP,IAAMqK,GAAU9D,IAAOC,IAAV,MAQC,SAAAG,GAAK,OAAIA,EAAMI,MAAMkI,kBAUnB,SAAAtI,GAAK,OAAIA,EAAMI,MAAMqB,YAGrB,SAAAzB,GAAK,OAAIA,EAAMI,MAAMmI,YAIrB,SAAAvI,GAAK,OAAIA,EAAMI,MAAMoI,aAU/BC,GAAO7I,IAAOC,IAAV,MAMJ6I,GAAQ9I,IAAO+H,OAAV,MAKC,SAAA3H,GAAK,OAAIA,EAAMI,MAAMkB,YAMP,SAAAtB,GAAK,OAAIA,EAAMI,MAAMgE,QAMpB,SAAApE,GAAK,OAAIA,EAAMI,MAAMgE,QAGpB,SAAApE,GAAK,OAAIA,EAAMI,MAAMgE,QAG3CuE,GAAO/I,IAAOC,IAAV,MAKJ+I,GAAShJ,IAAOC,IAAV,MAMNgJ,GAAQjJ,IAAOC,IAAV,MAKLiJ,GAAQlJ,IAAOC,IAAV,MAMLkJ,GAAWnJ,IAAOC,IAAV,KASA,SAAAG,GAAK,OAAIA,EAAMI,MAAMkB,YAUnB,SAAAtB,GAAK,OAAIA,EAAMI,MAAMgE,QAUnB,SAAApE,GAAK,OAAIA,EAAMI,MAAMmI,YAIrB,SAAAvI,GAAK,OAAIA,EAAMI,MAAMoI,aAavB,SAAAxI,GAAK,OAAIA,EAAMI,MAAMoI,aAG/BQ,GAAMpJ,IAAOC,IAAV,KAIHoJ,GAAMrJ,YAAOoJ,GAAPpJ,CAAH,KACE,SAAAI,GAAK,OAAKA,EAAMkJ,KAAK,EAAG,QAMjB,SAAAlJ,GAAK,OAAIA,EAAMI,MAAMgE,QAKjC+E,GAAevJ,IAAOC,IAAV,KA2FHuJ,OA/Ef,YAA+B,IAAZrB,EAAW,EAAXA,SAAW,EAEMlG,oBAAS,GAFf,mBAErBwH,EAFqB,KAEVC,EAFU,OAGMzH,mBAAS,MAHf,mBAGrB0H,EAHqB,KAGVnN,EAHU,KAK5B0I,qBAAU,WAER,OADAjI,IAAqBzB,UAAUgB,GACxB,kBAAMS,IAAqBxB,YAAYe,MAC7C,IAGH,IAAI/C,EAAS,GACb,GAAIkQ,GAAa3T,OAAOC,KAAK0T,GAAWhT,OAAS,EAAG,CAClD,IAAIiT,EAAW,KACTC,EAAW,SAAA7Q,GAAG,OAClBA,EAAIoM,QAAQ0E,eAAe,CAC3BC,SAAU,SACVC,OAAQ,YAEJC,EAAW,kBAACpB,GAAD,KACd7S,OAAOC,KAAK0T,GAAW5M,OAAOjD,KAAI,SAAAoQ,GACjC,IAAMlR,EAAMmR,IAAMC,YAClB,OACE,kBAACrB,GAAD,CAAM/P,IAAKA,EAAK7C,IAAK+T,GACnB,kBAACpB,GAAD,CAAOzF,QAAS,kBAAMwG,EAAS7Q,KAAOkR,GACtC,kBAAClB,GAAD,KACGhT,OAAOC,KAAK0T,EAAUO,IAAOnN,OAAOjD,KAAI,SAAAuQ,GACvC,IAAMrR,EAAMmR,IAAMC,YACZE,EAAW,IAAIzT,KAAJ,UAAYqT,EAAZ,YAAoBG,EAApB,QAAgC7B,eAAejR,OAAO,EAAE,GACzE,OACE,kBAAC0R,GAAD,CAAOjQ,IAAKA,EAAK7C,IAAK+T,EAAKG,GACzB,kBAACvB,GAAD,CAAOzF,QAAS,kBAAMwG,EAAS7Q,KAAOsR,GACtC,kBAACpB,GAAD,KACE,kBAACG,GAAD,CAAKC,KAAM,EAAG5C,UAAW+C,GAAa,aACrCzT,OAAOC,KAAK0T,EAAUO,GAAMG,IAAQtN,OAAOjD,KAAI,SAAAzC,GAC9C,IAAIkT,EAAY,EACZX,IACFW,IAAeL,EAAON,EAASM,KAAQ,EAAK,GAASG,EAAQT,EAASS,MAAS,GAAK,IAAOhT,EAAOuS,EAASvS,KAAO,GAAK,GAEzHuS,EAAW,CAACM,OAAKG,QAAMhT,QACvB,IAAMmT,EAAW,IAAI3T,KAAJ,UAAYqT,EAAZ,YAAoBG,EAApB,YAA6BhT,IAAQmR,eAChDxP,EAAMmR,IAAMC,YACZK,EAAWP,EAAKG,EAAMhT,IAASiF,IAUrC,OAAQ,kBAAC,WAAD,CAAUnG,IAAK+T,EAAKG,EAAMhT,EAAKkT,GACrC,kBAAClB,GAAD,CAAKC,KAAMiB,EAAW7D,UAAW+C,GAAa,aAC9C,kBAACN,GAAD,CAAUnQ,IAAKA,EAAK0N,WAAY+D,EAAW,UAAY,KAAKhB,GAAa,YAAaiB,OAPrE,WACbD,GACFZ,EAAS7Q,IAK+FqK,QAXxF,WAClB5G,YAAckN,EAAUO,GAAMG,GAAOhT,GAAM,IAC3CwS,EAAS7Q,KAUP,gCAASwR,EAASjT,OAAO,EAAE,GAAG,IAAIiT,EAASjT,OAAO,EAAE,IACnDkS,GAAa,kBAAC9B,EAAD,CAAM/N,SAAU+P,EAAUO,GAAMG,GAAOhT,UAI7D,kBAACgS,GAAD,CAAKC,KAAM,EAAG5C,UAAW+C,GAAa,wBAWtDhQ,EAAS,kBAAC,GAAD,CAASiN,UAAS,WAAM+C,GAAa,aAAnB,YAAmCtB,GAAY,YACxE,kBAACoB,GAAD,CAAc7C,UAAW+C,GAAa,QAASpG,QAAS,kBAAMqG,GAAcD,KAAY,yBAAKtG,IAAKwH,IAAkB9D,IAAI,oBACvHoD,GAGL,OAAOxQ,G,y8FC3OT,IAAMmR,GAAkB5K,IAAOC,IAAV,MAYf4K,GAAO7K,IAAOG,IAAV,MAeJ2K,GAAkB9K,IAAOC,IAAV,MAWf8K,GAAoB/K,IAAOC,IAAV,MAajB+H,GAAUhI,IAAOG,IAAV,MAUP6K,GAAWhL,IAAOG,IAAV,MAUR8K,GAAiBjL,IAAOG,IAAV,MAcP+K,GAAoBlL,IAAOqB,MAAV,MAWjB8J,GAAoBnL,IAAOa,MAAV,MAaxBuK,GAAmBpL,IAAOG,IAAV,MAahBkL,GAAwBrL,IAAOG,IAAV,MAcrBmL,GAAqBtL,IAAO/H,EAAV,MAwDTsT,OApDf,YAAuE,IAAtDnD,EAAqD,EAArDA,YAAaC,EAAwC,EAAxCA,eAAgBF,EAAwB,EAAxBA,SAAUqD,EAAc,EAAdA,YAAc,EACxBvJ,mBAAS,MADe,mBAC7DwJ,EAD6D,KAC7CC,EAD6C,KAE9DC,EAAkB1G,mBAF4C,8CAIpE,WAA6B/P,GAA7B,kBAAA+C,EAAA,yDACOwT,GAAqC,eAAnBA,EADzB,wBAEIC,EAAkB,cAFtB,kBAIyBE,cAJzB,YAIYrT,EAJZ,gCAMQmT,EAAkB,MAN1B,UAO0B/F,IAAIC,gBAAgBrN,GAP9C,QAOcmN,EAPd,OAQQiG,EAAgBvG,QAAQmB,KAAOb,EAC/BiG,EAAgBvG,QAAQoB,SAAW3P,KAAKmH,MAAM6N,WAAW,QACzDF,EAAgBvG,QAAQ0G,QAVhC,0DAcMJ,EAAkB,MAClBvW,QAAQC,MAAR,MAfN,kCAkBS,GAlBT,2DAJoE,sBA6BpE,OACE,kBAACwV,GAAD,KACE,kBAACC,GAAD,CAAM1H,IAAK4I,KAAMlF,IAAI,cACnB,kBAACiE,GAAD,KACE,kBAACC,GAAD,CAAmB1H,QAAS,kBAAMgF,GAAgBD,KAE7CA,EAED,kBAAC4C,GAAD,CAAW7H,IAAK6I,KAAWnF,IAAI,sCAD/B,kBAAC,GAAD,CAAS1D,IAAKmF,IAAUzB,IAAI,qCAIhC,kBAACoE,GAAD,CAAgB9H,IAAK8I,KAAY5I,QAAS,kBAAMmI,GAAarD,MAC7D,kBAAC+C,GAAD,CAAmBvV,KAAK,OAAOuW,GAAG,OAAOC,OAAO,QAAQ5I,SAhBhE,SAAsBrO,GACpB0K,YAAe1K,EAAE2N,OAAO3K,MAAM,OAgBxB,kBAACiT,GAAD,CAAmBiB,QAAQ,QACzB,kBAAChB,GAAD,CAAkBjI,IAAKkJ,KAAcxF,IAAI,4BAE3C,kBAACwE,GAAD,CAAuBlI,IAAKmJ,KAAcjJ,QA7CkB,4CA6CMwD,IAAI,0BACtE,kBAACyE,GAAD,CAAoBtS,IAAK2S,O,SCpMnC,SAASY,KAA2Q,OAA9PA,GAAWvW,OAAOiG,QAAU,SAAU4G,GAAU,IAAK,IAAImE,EAAI,EAAGA,EAAIwF,UAAU7V,OAAQqQ,IAAK,CAAE,IAAIyF,EAASD,UAAUxF,GAAI,IAAK,IAAI7Q,KAAOsW,EAAczW,OAAOK,UAAUsG,eAAe+P,KAAKD,EAAQtW,KAAQ0M,EAAO1M,GAAOsW,EAAOtW,IAAY,OAAO0M,IAA2B8J,MAAM5W,KAAMyW,WAEhT,SAASI,GAAyBH,EAAQI,GAAY,GAAc,MAAVJ,EAAgB,MAAO,GAAI,IAAkEtW,EAAK6Q,EAAnEnE,EAEzF,SAAuC4J,EAAQI,GAAY,GAAc,MAAVJ,EAAgB,MAAO,GAAI,IAA2DtW,EAAK6Q,EAA5DnE,EAAS,GAAQiK,EAAa9W,OAAOC,KAAKwW,GAAqB,IAAKzF,EAAI,EAAGA,EAAI8F,EAAWnW,OAAQqQ,IAAO7Q,EAAM2W,EAAW9F,GAAQ6F,EAASjJ,QAAQzN,IAAQ,IAAa0M,EAAO1M,GAAOsW,EAAOtW,IAAQ,OAAO0M,EAFxMkK,CAA8BN,EAAQI,GAAuB,GAAI7W,OAAOgX,sBAAuB,CAAE,IAAIC,EAAmBjX,OAAOgX,sBAAsBP,GAAS,IAAKzF,EAAI,EAAGA,EAAIiG,EAAiBtW,OAAQqQ,IAAO7Q,EAAM8W,EAAiBjG,GAAQ6F,EAASjJ,QAAQzN,IAAQ,GAAkBH,OAAOK,UAAU6W,qBAAqBR,KAAKD,EAAQtW,KAAgB0M,EAAO1M,GAAOsW,EAAOtW,IAAU,OAAO0M,EAMne,IAAIsK,GAAqB,IAAMC,cAAc,IAAK,CAChDC,UAAW,wBACG,IAAMD,cAAc,OAAQ,CAC1CxW,EAAG,iBACHyW,UAAW,iCACXC,KAAM,SACS,IAAMF,cAAc,OAAQ,CAC3CG,MAAO,GACPC,OAAQ,EACRH,UAAW,qBACXC,KAAM,UAGJ,GAAe,SAAsBG,GACvC,IAAIC,EAASD,EAAKC,OACdpH,EAAQmH,EAAKnH,MACblG,EAAQwM,GAAyBa,EAAM,CAAC,SAAU,UAEtD,OAAoB,IAAML,cAAc,MAAOb,GAAS,CACtDgB,MAAO,GACPC,OAAQ,GACRG,QAAS,YACT3U,IAAK0U,GACJtN,GAAQkG,EAAqB,IAAM8G,cAAc,QAAS,KAAM9G,GAAS,KAAM6G,KAGhFS,GAAa,IAAMC,YAAW,SAAUzN,EAAOpH,GACjD,OAAoB,IAAMoU,cAAc,GAAcb,GAAS,CAC7DmB,OAAQ1U,GACPoH,OAEU,ICvCf,SAAS,KAA2Q,OAA9P,GAAWpK,OAAOiG,QAAU,SAAU4G,GAAU,IAAK,IAAImE,EAAI,EAAGA,EAAIwF,UAAU7V,OAAQqQ,IAAK,CAAE,IAAIyF,EAASD,UAAUxF,GAAI,IAAK,IAAI7Q,KAAOsW,EAAczW,OAAOK,UAAUsG,eAAe+P,KAAKD,EAAQtW,KAAQ0M,EAAO1M,GAAOsW,EAAOtW,IAAY,OAAO0M,IAA2B8J,MAAM5W,KAAMyW,WAEhT,SAAS,GAAyBC,EAAQI,GAAY,GAAc,MAAVJ,EAAgB,MAAO,GAAI,IAAkEtW,EAAK6Q,EAAnEnE,EAEzF,SAAuC4J,EAAQI,GAAY,GAAc,MAAVJ,EAAgB,MAAO,GAAI,IAA2DtW,EAAK6Q,EAA5DnE,EAAS,GAAQiK,EAAa9W,OAAOC,KAAKwW,GAAqB,IAAKzF,EAAI,EAAGA,EAAI8F,EAAWnW,OAAQqQ,IAAO7Q,EAAM2W,EAAW9F,GAAQ6F,EAASjJ,QAAQzN,IAAQ,IAAa0M,EAAO1M,GAAOsW,EAAOtW,IAAQ,OAAO0M,EAFxM,CAA8B4J,EAAQI,GAAuB,GAAI7W,OAAOgX,sBAAuB,CAAE,IAAIC,EAAmBjX,OAAOgX,sBAAsBP,GAAS,IAAKzF,EAAI,EAAGA,EAAIiG,EAAiBtW,OAAQqQ,IAAO7Q,EAAM8W,EAAiBjG,GAAQ6F,EAASjJ,QAAQzN,IAAQ,GAAkBH,OAAOK,UAAU6W,qBAAqBR,KAAKD,EAAQtW,KAAgB0M,EAAO1M,GAAOsW,EAAOtW,IAAU,OAAO0M,EAMne,IAAI,GAAqB,IAAMuK,cAAc,OAAQ,CACnDlB,GAAI,IACJ,YAAa,UACbmB,UAAW,kBACXC,KAAM,UACNQ,SAAU,GACVC,WAAY,+BACE,IAAMX,cAAc,QAAS,CAC3CY,EAAG,EACHC,EAAG,GACF,WAEC,GAAoB,SAA2BR,GACjD,IAAIC,EAASD,EAAKC,OACdpH,EAAQmH,EAAKnH,MACblG,EAAQ,GAAyBqN,EAAM,CAAC,SAAU,UAEtD,OAAoB,IAAML,cAAc,MAAO,GAAS,CACtDG,MAAO,GACPC,OAAQ,GACRG,QAAS,YACT3U,IAAK0U,GACJtN,GAAQkG,EAAqB,IAAM8G,cAAc,QAAS,KAAM9G,GAAS,KAAM,KAGhF,GAAa,IAAMuH,YAAW,SAAUzN,EAAOpH,GACjD,OAAoB,IAAMoU,cAAc,GAAmB,GAAS,CAClEM,OAAQ1U,GACPoH,OAEU,I,q7BC/BPjH,GAAQuF,IAARvF,IAEF+U,GAAclO,IAAO0H,QAAV,MAMD,SAAAtH,GAAK,OAAIA,EAAMI,MAAMkI,kBAG/ByF,GAAYnO,IAAOC,IAAV,MAGC,SAAAG,GAAK,OAAIA,EAAMI,MAAMC,aAW/B2N,GAAkB7N,YAAH,MAMfa,GAAQpB,IAAOqB,MAAV,KACP+M,IAGEC,GAASrO,IAAOsO,OAAV,KACRF,IACY,SAAAhO,GAAK,OAAIA,EAAMI,MAAMgE,QAK/B+J,GAAYvO,IAAOwO,SAAV,KAEXJ,IA8CWK,GA3CM,SAAC,GAAe,IAAbC,EAAY,EAAZA,MAAY,EACEzM,mBAAS,IADX,mBAC3B0M,EAD2B,KACfC,EADe,OAEA3M,mBAAS,IAFT,mBAE3B4M,EAF2B,KAEhBC,EAFgB,KAa5BC,EAA0B,KAAfJ,GAAmC,KAAdE,EAEtC,OACE,kBAACX,GAAD,KACE,kBAACC,GAAD,KACE,kBAAC/M,GAAD,CAAOzL,KAAK,OACVC,KAAK,QACLsW,GAAG,QACHzI,YAAY,QACZH,UAAU,QACVR,MAAQ6L,EACRpL,SAAW,SAAArO,GAAC,OAAI0Z,EAAc1Z,EAAE2N,OAAOC,UAEzC,kBAACyL,GAAD,CAAW5Y,KAAK,YACdC,KAAK,QACLsW,GAAG,QACHzI,YAAY,wBACZH,UAAU,aACVR,MAAQ+L,EACRtL,SAAW,SAAArO,GAAC,OAAI4Z,EAAa5Z,EAAE2N,OAAOC,UAEtC,kBAACuL,GAAD,CACA1Y,KAAMoZ,EAAW,SAAW,SAC5B1L,QAAS0L,EAhCF,WAMb5V,GAAI,CALS,CACXvD,KAAM+Y,EACN9Y,KAAMgZ,EACNlZ,KAAM,UAGR+Y,KAyBmCA,GAAQK,EAAW,kBAAC,GAAD,MAAe,kBAAC,GAAD,U,2mHCnFjE5V,GAAsDuF,IAAtDvF,IAAK0F,GAAiDH,IAAjDG,OAAQrD,GAAyCkD,IAAzClD,UAAWwD,GAA8BN,IAA9BM,aAAcvD,GAAgBiD,IAAhBjD,YAExCyS,GAAclO,IAAO0H,QAAV,MAMD,SAAAtH,GAAK,OAAIA,EAAMI,MAAMkI,kBAG/BsG,GAAqBhP,IAAOC,IAAV,MAOR,SAAAG,GAAK,OAAIA,EAAMI,MAAMC,aAM/BwO,GAAajP,IAAOC,IAAV,MAKM,SAAAG,GAAK,OAAIA,EAAMI,MAAMwD,YAQrCkL,GAAalP,IAAOmP,GAAV,MAIL,SAAA/O,GAAK,OAAIA,EAAMI,MAAM+D,UAG1B6K,GAAWpP,IAAOuB,GAAV,MAKR8N,GAAWrP,IAAOyB,GAAV,MAIe,SAAArB,GAAK,OAAIA,EAAMI,MAAMC,aAM5C6O,GAAWtP,IAAOuP,EAAV,MAIRC,GAAexP,IAAOsO,OAAV,MAGI,SAAAlO,GAAK,OAAIA,EAAMI,MAAMqB,YAK9B,SAAAzB,GAAK,OAAIA,EAAMI,MAAMwD,YAChB,SAAA5D,GAAK,OAAIA,EAAMI,MAAMsB,OAIjC2N,GAAgBzP,IAAOC,IAAV,MAMboO,GAASrO,IAAOsO,OAAV,MAGD,SAAAlO,GAAK,MAAmB,WAAfA,EAAMxK,KAAoB,MAAQ,SAC3C,SAAAwK,GAAK,OAAIA,EAAMI,MAAMwD,YAChB,SAAA5D,GAAK,MAAmB,WAAfA,EAAMxK,KAAoBwK,EAAMI,MAAMsB,IAAM1B,EAAMI,MAAMgE,QACrE,SAAApE,GAAK,OAAuB,IAAnBA,EAAMoD,SAAoB,cAAe,aAIxDkM,GAAc1P,IAAOC,IAAV,MAOJ0P,GAAc3P,IAAOC,IAAV,MAWlB2P,GAAgB5P,IAAOC,IAAV,MAkBN4P,GAAkB7P,IAAOqB,MAAV,MAWfyO,GAAkB9P,IAAOa,MAAV,MAkBtBX,GAAMF,IAAOG,IAAV,MA6DM4P,OApDf,YAA+B,IAATrB,EAAQ,EAARA,MAAQ,EACczM,oBAAS,GADvB,mBACrB+N,EADqB,KACNC,EADM,OAEEhO,mBAAS,IAFX,mBAErBD,EAFqB,KAEZkO,EAFY,KAG5BhL,qBAAU,WAER,OADA1J,GAAU0U,GACH,kBAAMzU,GAAYyU,MACxB,IAOH,IAAMC,EAAS,oCACb,kBAAC,GAAD,KACE,kBAACnB,GAAD,KACE,kBAACC,GAAD,KACE,kBAACC,GAAD,KAAalN,EAAQrL,OAAS,EAAI,sBAAwB,WAC1D,kBAACyY,GAAD,KACGpN,EAAQlI,KAAI,SAAA6D,GAAM,OACjB,kBAAC0R,GAAD,CAAUlZ,IAAKwH,EAAOrI,KACtB,kBAACga,GAAD,MAvBOc,EAuBiBzS,EAAOpF,KAAK3C,KAvBhBwa,EAASzZ,QAAU,GAAKyZ,EAAWA,EAAS7Y,OAAO,EAAG,IAAM,OAuBtC8Y,eACxC,kBAACtO,GAAA,EAAsB,CAAEC,QAAS,CAACrE,KACnC,kBAAC6R,GAAD,CACEnM,QAAU,kBAAMrE,GAAarB,EAAOrI,MACpCgb,aAAW,iBAFb,SAzBK,IAAAF,MAgCVpO,EAAQrL,OAAS,GAAK,kBAAC8Y,GAAD,KAAe,kBAAC1N,GAAA,EAAD,cAAwB,CAAEC,WAA1B,CAAqC3B,UAAQ,OAGrF,kBAACsP,GAAD,KACI,kBAACE,GAAD,CAAiBla,KAAK,OAAOuW,GAAG,OAAO3I,SA1BjD,SAAwBrO,GACtBiE,GAAIjE,EAAE2N,OAAO3K,OACbhD,EAAE2N,OAAOC,MAAQ,MAwBwDyN,UAAQ,IACzE,kBAACT,GAAD,CAAiB1D,QAAQ,QAAzB,aACA,kBAACwD,GAAD,CAAevM,QAAS,kBAAM4M,GAAiB,KAA/C,aAGJ,kBAACP,GAAD,KACE,kBAAC,GAAD,CAAQrM,QAAS,WAAOxE,KAAU6P,MAAW,kBAAC,GAAD,CAAKvL,IAAKqN,KAAgB3J,IAAI,oBASnF,OAAOmJ,EAAgB,kBAAC,GAAD,CAActB,MAAO,kBAAMuB,GAAiB,MAAYE,G,kWC5N1E,IAAM3P,GAAQ,CACnBsB,IAAK,UACL0C,KAAM,UACNmE,SAAU,UACV8H,aAAc,UACd5O,SAAU,UACV+G,UAAW,UACX8H,aAAc,kBACd/P,KAAM,UACNF,UAAW,UACXiB,SAAU,UACViP,MAAO,UACP3M,SAAU,UACVO,OAAQ,UACRqM,MAAM,UACNlI,eAAgB,yBAChBmI,eAAgB,wBA2BHC,GAxBKC,YAAH,KAgBNvQ,GAAM+D,OAIN/D,GAAM+D,QCbFyM,OApBf,WAAgB,IAAD,EACmB/O,mBAASzB,IAD5B,mBACNyQ,EADM,aAEmBhP,oBAAS,IAF5B,mBAENkG,EAFM,KAEIqD,EAFJ,OAGyBvJ,oBAAS,GAHlC,mBAGNmG,EAHM,KAGOC,EAHP,KAKb,OACE,oCACE,kBAAC,GAAD,MACA,kBAAC,IAAD,CAAe7H,MAAOyQ,GACnB7I,GAAe,kBAAC,GAAD,CAAasG,MAAO,kBAAMrG,GAAe,MACzD,kBAAC,EAAS,CAACF,WAAUC,cAAaC,mBAClC,6BACE,kBAAC,GAAa,CAACF,aACf,kBAAC,GAAW,CAACC,cAAaC,iBAAgBF,WAAUqD,oBChB9D0F,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,GAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.86efbf20.chunk.js","sourcesContent":["export default function errorHandler(e) {\r\n    console.error(e);\r\n    // Could Do: setup external log, maybe a google sheet to push errors to\r\n}","export default function FileObj({uid, fileRef, activeTimeStamp, timeStamps, tags, type, name, text, size}) {\r\n    this.uid = uid;\r\n    this.timeStamps = {};\r\n    this.activeTimeStamp = activeTimeStamp || 'modified';\r\n    this.tags = tags || [];\r\n    this.fileRef = fileRef;\r\n    this.name = name;\r\n    this.text = text || '';\r\n    this.type = type;\r\n    this.size = size;\r\n    Object.keys(timeStamps).forEach(key => this.timeStamps[key] = this.formatDate(timeStamps[key]));\r\n}\r\nFileObj.prototype.formatDate = function(dateTime) {\r\n    if (this.isFormatedDate(dateTime)) { \r\n        return dateTime\r\n    }\r\n    const makeMinTwoDigits = n => {\r\n        const str = n+'';\r\n        return str.length === 1 ? '0'+str : str\r\n    };\r\n    const d = new Date(dateTime);\r\n    return d.getFullYear() +\r\n        makeMinTwoDigits(d.getMonth()+1) +\r\n        makeMinTwoDigits(d.getDate()) +\r\n        makeMinTwoDigits(d.getHours()) +\r\n        makeMinTwoDigits(d.getMinutes()) +\r\n        makeMinTwoDigits(d.getSeconds());\r\n}\r\nFileObj.prototype.unFormatDate = function(date) {\r\n    if (this.isFormatedDate(date)) {\r\n        const len = date.length;\r\n        return `${len > 3 && date.substr(0,4)}${len > 5 && '-'+date.substr(4,2)}${len > 7 && '-'+date.substr(6,2)}${len > 9 && ' '+date.substr(8,2)}${len > 11 && ':'+date.substr(10,2)}${len > 13 && ':'+date.substr(10,2)}`\r\n    }\r\n    else {\r\n        console.error(date+' not formatted!')\r\n    }\r\n}\r\nFileObj.prototype.isFormatedDate = function(date) {\r\n    return !(typeof date !== 'string' || date.match(/\\D/) || date.length !== 14)\r\n}\r\nFileObj.prototype.getActiveDate = function() {\r\n    return this.timeStamps[this.activeTimeStamp];\r\n}\r\nFileObj.prototype.setActiveDate = function(name, dateTime) {\r\n    this.activeTimeStamp = name;\r\n    this.timeStamps[name] = this.formatDate(dateTime);\r\n}\r\nFileObj.prototype.flagMissingData = function(isMissing = true) {\r\n    this.fileMissing = isMissing;\r\n}","import Dexie from 'dexie';\r\nimport errorHandler from './errorHandler';\r\nimport FileObj from './FileObj';\r\nimport {exportDB, importInto} from \"dexie-export-import\";\r\n\r\nconst localDB = new Dexie('user_dbac');\r\nlocalDB.version(1).stores({\r\n    appData: 'ref',\r\n    files: 'ref',\r\n});\r\n\r\nasync function wipeAllData() {\r\n    await localDB.files.clear();\r\n    await localDB.appData.clear();\r\n    await localDB.files.delete('appData');\r\n    await localDB.appData.delete('files');\r\n    return true\r\n}\r\n\r\nasync function importData(file) {\r\n    try {\r\n        const backup = await exportData();\r\n        try {\r\n            await wipeAllData();\r\n            await importInto(localDB, file);\r\n            return true\r\n        }\r\n        catch (e) {\r\n            await wipeAllData();\r\n            importData(backup);\r\n            errorHandler(e);\r\n            return false \r\n        }\r\n    } catch (e) {\r\n        errorHandler(e);\r\n        throw Error('Unable to make a backup before import!')\r\n    }\r\n}\r\n\r\nasync function exportData() {\r\n    try {\r\n        const blob = await exportDB(localDB);\r\n        const file = await new Blob([blob], {type: 'application/wavy'});\r\n        return file\r\n    }\r\n    catch (e) {\r\n        errorHandler(e);\r\n        return e\r\n    }\r\n}\r\n\r\nasync function writeFile(ref, file) {\r\n    try {\r\n        const data = await fileToArrayBuffer(file);\r\n        await localDB.files.add({ref, data: {blob: data, type: file.type}});\r\n        return true\r\n    }\r\n    catch (e) {\r\n        if (e.message === \"Key already exists in the object store.\") {\r\n            const duplicate = true; // TODO make hash comparision function\r\n            if (!duplicate) {\r\n                await writeFile(ref+'d', file);\r\n                return true\r\n            }\r\n        }\r\n        else {\r\n            errorHandler(e);\r\n        }\r\n    }\r\n}\r\n\r\nasync function readFile(ref) {\r\n    try {\r\n        let dataObj = await localDB.files.get(ref);\r\n        if (!dataObj) {\r\n            throw new Error(`Could not get data for ref: ${ref} !`)\r\n        }\r\n        return new Blob([dataObj.data.blob], {type : dataObj.data.type})\r\n    }\r\n    catch (e) {\r\n        errorHandler(e);\r\n    }\r\n}\r\nasync function readAppData() {\r\n    try {\r\n        let appData = await localDB.appData.get(0);\r\n        let output = false;\r\n        if (appData) {\r\n            output = JSON.parse(appData.data);\r\n            const fileObjs = Object.values(output.fileObjs).map(data => new FileObj({...data}));\r\n            output.fileObjs = {};\r\n            fileObjs.forEach(fileObj => output.fileObjs[fileObj.uid] = fileObj);\r\n        }\r\n        return output\r\n    }\r\n    catch (e) {\r\n        errorHandler(e);\r\n    }\r\n}\r\nasync function writeAppData(appData) {\r\n    try {\r\n        const data = JSON.stringify(appData);\r\n        await localDB.appData.put({ref: 0, data});\r\n        return true\r\n    }\r\n    catch (e) {\r\n        errorHandler(e);\r\n    }\r\n}\r\n\r\nfunction fileToArrayBuffer(file) {\r\n    const blob = new Blob([file]);\r\n    return new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.addEventListener('loadend', (e) => {\r\n            resolve(reader.result);\r\n        });\r\n        reader.addEventListener('error', reject);\r\n        reader.readAsArrayBuffer(blob);\r\n    });\r\n}\r\n\r\nexport {writeFile, readFile, readAppData, writeAppData, wipeAllData, exportData, importData}","import { readAppData, writeAppData } from './localStorage';\r\nexport default function AppData(handleFileObjsChange) {\r\n    this.fileObjsUpdate = handleFileObjsChange;\r\n    this.lastModified = null;\r\n    this.basedOn = null;\r\n    this.changeLog = [];\r\n    this.fileObjs = {};\r\n    this.init();\r\n}\r\nAppData.prototype.onUpdate = function() {\r\n    this.fileObjsUpdate();\r\n    writeAppData(this);\r\n}\r\nAppData.prototype.init = async function() {\r\n    const data = await readAppData();\r\n    if (data) {\r\n        this.clear();\r\n        this.rebase(data);\r\n    }\r\n}\r\nAppData.prototype.add = function(fileObj, log = true) {\r\n    log && this.changeLog.push({ func: 'add', data: fileObj });\r\n    this.fileObjs[fileObj.uid] = fileObj;\r\n    this.onUpdate();\r\n}\r\nAppData.prototype.update = function(fileObj, log = true) {\r\n    log && this.changeLog.push({ func: 'update', data: fileObj });\r\n    Object.assign(this.fileObjs[fileObj.uid], fileObj);\r\n    this.onUpdate();\r\n}\r\nAppData.prototype.delete = function(uid, log = true) {\r\n    log && this.changeLog.push({ func: 'delete', data: uid });\r\n    delete this.fileObjs[uid];\r\n    this.onUpdate();\r\n}\r\nAppData.prototype.rebase = function(newAppData) {\r\n    this.basedOn = newAppData.lastModified;\r\n    this.fileObjs = newAppData.fileObjs;\r\n    for (let op of this.changeLog) {\r\n        this[op.func](op.data, false);\r\n    }\r\n    this.changeLog = [];\r\n    this.onUpdate();\r\n}\r\nAppData.prototype.clear = function() {\r\n    this.lastModified = null;\r\n    this.basedOn = null;\r\n    this.changeLog = [];\r\n    this.fileObjs = {};\r\n    this.onUpdate();\r\n}\r\n","export default function Subscriber(stateSetter) {\r\n    this.stateSetter = stateSetter;\r\n    this.update = this.update.bind(this);\r\n}\r\nSubscriber.prototype.update = function(data) {\r\n    this.stateSetter(data);\r\n}","import Subscriber from './Subscriber';\r\n\r\nexport default function Subscription() {\r\n    this.list = [];\r\n    this.subscribe = this.subscribe.bind(this);\r\n    this.update = this.update.bind(this);\r\n    this.unsubscribe = this.unsubscribe.bind(this);\r\n}\r\nSubscription.prototype.subscribe = function(stateSetter) {\r\n    this.list.push(new Subscriber(stateSetter));\r\n}\r\nSubscription.prototype.unsubscribe = function(stateSetter) {\r\n    this.list = this.list.filter(sub => sub.stateSetter !== stateSetter);\r\n}\r\nSubscription.prototype.update = function(data) {\r\n    this.list.forEach(sub => sub.update(data));\r\n}","import AppData from './AppData';\r\nimport FileObj from './FileObj';\r\nimport errorHandler from './errorHandler';\r\nimport { writeFile, readFile, writeAppData, importData, exportData as exportTimeLine, wipeAllData } from './localStorage';\r\nimport Subscriber from './Subscriber';\r\nimport Subscription from './Subscription';\r\n\r\nconst appData = new AppData(handleFileObjsChange);\r\nasync function handleFileObjsChange() {\r\n    setActiveFileObjs();\r\n    setNodesList();\r\n}\r\n\r\nlet activeNode;\r\nfunction setActiveNode(fileObj) {\r\n    if (fileObj && fileObj.__proto__.hasOwnProperty('getActiveDate')) {\r\n        const fileObjDate = fileObj.getActiveDate();\r\n        if (fileObjDate) {\r\n            activeNode = fileObjDate.substr(0, 8);\r\n            setActiveFileObjs();\r\n        }\r\n    }\r\n    else {\r\n        errorHandler(Error(`Unable to setActiveNode with ${JSON.stringify(fileObj)}`));\r\n    }\r\n}\r\nfunction setToLatestNode() {\r\n    const lastFileObj = Object.values(appData.fileObjs).sort((a, b) => b.getActiveDate() - a.getActiveDate())[0];\r\n    lastFileObj && setActiveNode(lastFileObj);\r\n}\r\n\r\n\r\nconst nodesListSubcription = new Subscription();\r\nfunction setNodesList() {\r\n    const getPath = dateTime => [dateTime.substr(0,4), ...dateTime.substr(4).match(/.{2}/g)]; \r\n    const fileObjs = Object.values(appData.fileObjs);\r\n    const nodes = {};\r\n    for (let fileObj of fileObjs) {\r\n        const path = getPath(fileObj.getActiveDate().substr(0, 8));\r\n        let head = nodes;\r\n        for (let key of path) {\r\n            if (!head.hasOwnProperty(key)) {\r\n                if (key !== path[path.length-1]) {\r\n                    head[key] = {};\r\n                }\r\n                else {\r\n                    head[key] = [];\r\n                }\r\n            }\r\n            head = head[key];\r\n        }\r\n        head.push(fileObj);\r\n    }\r\n    nodesListSubcription.update(nodes);\r\n}\r\n\r\nlet activeFileObjs = [];\r\nconst fileObjsSubcription = new Subscription();\r\nfunction setActiveFileObjs() {\r\n    if (!activeNode) {\r\n        setToLatestNode();\r\n    }\r\n    else {\r\n        let from = activeNode+'000000';\r\n        let to = activeNode+'235959';\r\n        activeFileObjs = getFileObjs(from, to);\r\n        if (activeFileObjs.length > 0) {\r\n            fileObjsSubcription.update(activeFileObjs);\r\n        }\r\n        else {\r\n            fileObjsSubcription.update([]);\r\n            setToLatestNode();\r\n        }\r\n    }\r\n}\r\nfunction getFileObjs(from = '0', to = '0') {\r\n    return Object.values(appData.fileObjs).filter(fileObj => {\r\n        const key = fileObj.getActiveDate();\r\n        return (key.substr(0, from.length) >= from && key.substr(0, to.length) <= to)\r\n    }).sort((a, b) => a.getActiveDate() - b.getActiveDate());\r\n}\r\n\r\nasync function addFiles(uploadsArr) {\r\n    let fileObj;\r\n    for (let upload of uploadsArr) {\r\n        const ref = makeFileRef(upload.file);\r\n        const {name, text = '', type} = upload.file;\r\n        const checkedType = checkFileType(type, name);\r\n        if (!upload.hasOwnProperty('timeStamps')) {\r\n            upload.timeStamps = {};\r\n        } \r\n        upload.timeStamps.modified = upload.file.lastModified || Date.now();\r\n        fileObj = new FileObj({...upload, name, text, fileRef: ref, type: checkedType, size: upload.file.size});\r\n        const activeDate = fileObj.getActiveDate();\r\n        const fObjsWithSameFile = Object.values(appData.fileObjs).filter(fObj => fObj.fileRef === ref);\r\n        if (fObjsWithSameFile.filter(fObj => fObj.getActiveDate() === activeDate).length === 0) {\r\n            appData.fileObjs[fileObj.uid] = fileObj;\r\n        }\r\n        if (fObjsWithSameFile.filter(fObj => !fObj.fileMissing).length < 1) {\r\n            fObjsWithSameFile.forEach(fObj => fObj.fileMissing && fObj.flagMissingData(false));\r\n            await writeFile(ref, upload.file);\r\n        }\r\n    }\r\n    await writeAppData(appData);\r\n    setActiveNode(fileObj);\r\n    setNodesList();\r\n    return true\r\n}\r\n\r\nasync function getFile(fileRef) {\r\n    try {\r\n        let file = await readFile(fileRef);\r\n        if (!file) {\r\n            // file = await - get from cloud/Google drive\r\n        }\r\n        if (!file) {\r\n            throw new Error(`File with ref: ${fileRef} not found!`)\r\n        }\r\n        return file\r\n    }\r\n    catch (e) {\r\n        errorHandler(e);\r\n    }\r\n}\r\n\r\nfunction removeFiles(fileObjs) {\r\n    fileObjs.forEach(fileObj => {\r\n        let key = fileObj.uid;\r\n        if (appData.fileObjs[key]) {\r\n        appData.delete(key);\r\n        return true\r\n    }\r\n    return Error(`no such file under key: ${key}`)\r\n    })\r\n}\r\n\r\nfunction makeFileRef(file) {\r\n    return file.name+file.size+file.lastModified\r\n}\r\n\r\nfunction checkFileType(type, name) {\r\n    if (!type) {\r\n        const segs = name.split('.');\r\n        if (segs.length > 1) {\r\n            return segs[segs.length-1];\r\n        }\r\n        else {\r\n            return \"unknown\"\r\n        }\r\n    }\r\n    return type\r\n}\r\n\r\nlet uploadsList = [];\r\nconst uploadsListSubcription = new Subscription();\r\nconst uploadFuncs = {\r\n    subscribe: function(stateSetter, uid) {\r\n        uploadsListSubcription.subscribe(stateSetter, uid);\r\n        uploadFuncs.set(uploadsList);\r\n    },\r\n    unsubscribe: uploadsListSubcription.unsubscribe,\r\n    set: function setUploadsList(arr) {\r\n        uploadsList = arr;\r\n        uploadsListSubcription.update(uploadsList);\r\n    },\r\n    submit: function submitUploadsList() {\r\n        addFiles(uploadsList);\r\n        uploadFuncs.set([]);\r\n    },\r\n    cancel: () => uploadFuncs.set([]),\r\n    deleteUpload: function deleteUpload(uid) {\r\n        const appendedUploads = uploadsList.filter(upload => upload.uid !== uid);\r\n        uploadFuncs.set(appendedUploads);\r\n    },\r\n    update: function updateDatesOrTags(uids, uploadMeta) {\r\n        const newUploadsList = uploadsList.slice(0);\r\n        for (let uid of uids) {\r\n            const index = newUploadsList.findIndex(upload => upload.uid === uid);\r\n            Object.assign(newUploadsList[index], {...uploadMeta, tags: uploadMeta.tags || []});\r\n        }\r\n        uploadFuncs.set([...newUploadsList]);\r\n    },\r\n    add: function addUploadsToList(newUploads) {\r\n        const newUploadsArr = Object.values(newUploads).map(upload => formatNewUpload(upload));\r\n        uploadFuncs.set([...uploadsList, ...newUploadsArr]);\r\n    }\r\n}\r\n\r\nlet newUploadCount = 0;\r\nfunction formatNewUpload(upload) {\r\n    const dateNow = Date.now();\r\n    return ({\r\n        uid: dateNow+`${++newUploadCount}`,\r\n        file: upload,\r\n    })\r\n}\r\n\r\nfunction updateFiles(filesArr) {\r\n    filesArr.forEach(fileObj => {\r\n        let key = fileObj.key;\r\n        if (appData.fileObjs[key]) {\r\n            Object.assign(appData.fileObjs[key], fileObj);\r\n            appData.update(appData.fileObjs[key]);\r\n            return true;\r\n        }    \r\n    })\r\n}\r\n\r\nasync function importTimeLine(file) {\r\n    await importData(file);\r\n    appData.init();\r\n    return true\r\n}\r\n\r\nexport {addFiles, getFile, removeFiles, nodesListSubcription, fileObjsSubcription, setActiveNode, activeNode, uploadFuncs, updateFiles, exportTimeLine, importTimeLine}\r\n","module.exports = __webpack_public_path__ + \"static/media/plusSign.d940466c.svg\";","import React, { useState, useEffect } from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport EditorIcon from '../assets/dateAndTagsIcon.svg';\r\nimport { uploadFuncs } from '../services/dataController';\r\n\r\nconst { update } = uploadFuncs;\r\n\r\nconst EditorBox = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nconst Img = styled.img`\r\n  width: ${props => props.isGlobal ? \"100px\" : \"60px\"};\r\n`;\r\n\r\nconst baseCss = css`\r\n  border: none;\r\n  padding: 0.5rem;\r\n  margin: 0.5rem;\r\n  background: ${props => props.theme.lightGrey};\r\n`;\r\n\r\nconst EditorForm = styled.div`\r\n  width: 280px;\r\n  margin: auto;\r\n  padding: 1rem;\r\n  background: ${props => props.theme.grey};\r\n  text-align: right;\r\n  position: absolute;\r\n  top: 2.2rem;\r\n  right: 0;\r\n  z-index: 999;\r\n`;\r\n\r\nconst Label = styled.label``;\r\nconst LineBreak = styled.br``;\r\n\r\nconst Select = styled.select`\r\n${baseCss};\r\n`;\r\n\r\nconst Option = styled.option`\r\n${baseCss};\r\n`;\r\n\r\nconst Input = styled.input`\r\n${baseCss};\r\n  ${props => props.type === \"text\" && css`\r\n    padding: 0.6rem;\r\n  `}\r\n`;\r\n\r\nconst TagLists = styled.ul`\r\n  padding: none;\r\n`;\r\n\r\nconst Tag = styled.li`\r\n  color: ${props => props.theme.lightGrey};\r\n  background: ${props => props.theme.darkGrey};\r\n  display: inline-block;\r\n  padding: 0.2rem 0.5rem;\r\n  font-size: 0.8rem;\r\n  border-radius: 3px;\r\n  margin: 0.5rem 0.5rem auto auto;\r\n`;\r\n\r\nconst DeleteBtn = styled.span`\r\n  cursor: pointer;\r\n  color: ${props => props.theme.greyBlue};\r\n  font-weight: 700;\r\n  font-size: 1rem;\r\n  margin-left: 0.3rem;\r\n  \r\n  &:hover {\r\n    color: ${props => props.theme.red};\r\n  }\r\n`;\r\n\r\nfunction DateAndTagsEditor({ uploads, isGlobal = false }) {\r\n  const uids = uploads.map(upload => upload.uid);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [values, setValues] = useState({\r\n    activeTimeStamp: uploads.activeTimeStamp || \"modified\",\r\n    user: (uploads.timeStamps && uploads.timeStamps.user) || formatForyyyyMMdd(Date.now()),\r\n    modified: (uploads[0].file && uploads[0].file.lastModified) || (uploads.timeStamps && uploads.timeStamps.modified) || Date.now(),\r\n    time: formatForHHMM((uploads.timeStamps && uploads.timeStamps.user) || Date.now()) || '00:00',\r\n    tags: uploads.tags || []\r\n  });\r\n  const [tags, setTags] = useState([...new Set(uploads.map(upload => upload.tag).filter(tag => tag))]);\r\n  const removeTag = tag => setTags( [...tags.slice(0, tags.indexOf(tag)), ...tags.slice(tags.indexOf(tag)+1)] );\r\n\r\n  const handleCustomValueChange = e => {\r\n    let { name, value } = e.target;\r\n    if (name === 'tags') {\r\n      if (value.match(/,/g) || e.key === \"Enter\") {\r\n        const cleanedValue = value.replace(/^\\s+|,|\\s+$/g, '');\r\n        if (cleanedValue !== \"\") {\r\n          const newTags = [...new Set([...tags, cleanedValue])];\r\n          setTags(newTags);\r\n          update(uids, { tags: newTags });\r\n        }\r\n        value = '';\r\n      }\r\n      setValues({ ...values, tags: value });\r\n    }\r\n    if (name === 'user') {\r\n      setValues({ ...values, user: value, activeTimeStamp: 'user'});\r\n      const userDatePlusTime = formatForyyyyMMdd(value)+' '+formatForHHMM(values['time']);\r\n        if (userDatePlusTime) {\r\n        update(uids, {activeTimeStamp: 'user', timeStamps: { user: userDatePlusTime }});\r\n      }\r\n    }\r\n    else if (name === 'time') {\r\n      setValues({ ...values, time: value });\r\n      const userDatePlusTime = formatForyyyyMMdd(values['user'])+' '+formatForHHMM(value);\r\n      if (userDatePlusTime) {\r\n        update(uids, {timeStamps: { user: userDatePlusTime }});\r\n      }\r\n    }\r\n    else if (name === 'activeTimeStamp') {\r\n      setValues({ ...values, activeTimeStamp: value });\r\n      update(uids, {activeTimeStamp: value});\r\n      if (value === 'user') {\r\n        update(uids, {timeStamps: { user: values.user }});\r\n      } \r\n    } \r\n  }\r\n\r\n  return (\r\n    <EditorBox>\r\n      <Img src={EditorIcon} isGlobal={isGlobal}\r\n        onClick={() => setIsOpen(isOpen === false ? true : false)}\r\n      /> \r\n      {isOpen && \r\n        <EditorForm>\r\n          <Select name=\"activeTimeStamp\" ariaLabel=\"Select date to use\" onChange={handleCustomValueChange} value={values.activeTimeStamp}>\r\n            <Option value=\"modified\">Date Modified</Option>\r\n            <Option value=\"user\">Custom Date</Option>\r\n          </Select>\r\n          <LineBreak />\r\n      {values.activeTimeStamp === 'modified' ? <>\r\n        <Input\r\n            type=\"date\"\r\n            value={formatForyyyyMMdd(values.modified)}\r\n            onChange={handleCustomValueChange}\r\n            disabled\r\n        /> \r\n        <Input\r\n          type=\"time\"\r\n          value={formatForHHMM(values.modified)}\r\n          onChange={handleCustomValueChange}\r\n          disabled\r\n        /> \r\n      </> : \r\n          <>\r\n            <Input\r\n                type=\"date\"\r\n                name=\"user\"\r\n                value={formatForyyyyMMdd(values.user)}\r\n                onChange={handleCustomValueChange}\r\n            /> \r\n            <Input\r\n              type=\"time\"\r\n              name=\"time\"\r\n              value={formatForHHMM(values.time)}\r\n              onChange={handleCustomValueChange}\r\n            /> \r\n          </>}\r\n          <LineBreak />\r\n              <Label>Tags:  \r\n                <Input\r\n                  type=\"text\"\r\n                  name=\"tags\"\r\n                  value={ values.tags }\r\n                  placeholder=\"Enter tags...\"\r\n                  onChange={handleCustomValueChange}\r\n                  onKeyPress={handleCustomValueChange}\r\n                />\r\n              </Label> \r\n              <LineBreak />\r\n          <TagLists>\r\n            {!global && tags.map(tag => <Tag key={tag}>{tag}<DeleteBtn ariaLabel=\"Delete tag\" onClick = {() => removeTag(tag)}>&times;</DeleteBtn></Tag>)}\r\n            </TagLists>\r\n        </EditorForm>\r\n      }\r\n      </EditorBox>\r\n  );\r\n}\r\n\r\nexport default DateAndTagsEditor;\r\n\r\nconst makeMinTwoDigits = n => {\r\n  const str = n+'';\r\n  return str.length === 1 ? '0'+str : str\r\n};\r\nfunction formatForyyyyMMdd(date) {\r\n  const d = new Date(date);\r\n  const output = d.getFullYear() + '-' +\r\n      makeMinTwoDigits(d.getMonth()+1) + '-' +\r\n      makeMinTwoDigits(d.getDate());\r\n  if (output.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\r\n    return output\r\n  }\r\n  else {\r\n    return date\r\n  }\r\n}\r\n\r\nfunction formatForHHMM(date) {\r\n  const d = new Date(date);\r\n  const output = makeMinTwoDigits(d.getHours()) + ':' +\r\n  makeMinTwoDigits(d.getMinutes());\r\n  if (output.match(/^\\d\\d:\\d\\d$/)) {\r\n    return output\r\n  }\r\n  else {\r\n    return date\r\n  }\r\n}\r\n\r\n\r\n","module.exports = __webpack_public_path__ + \"static/media/placeholder.a8a9abfe.svg\";","module.exports = __webpack_public_path__ + \"static/media/openIcon.c2d348c7.svg\";","module.exports = __webpack_public_path__ + \"static/media/wavy-logo.5fa604da.svg\";","module.exports = __webpack_public_path__ + \"static/media/minusSign2.e2ee8f29.svg\";","module.exports = __webpack_public_path__ + \"static/media/trashTumbleIcon.8a43959d.svg\";","module.exports = __webpack_public_path__ + \"static/media/importButton.0e1a5dbb.svg\";","module.exports = __webpack_public_path__ + \"static/media/exportButton.9eb61a1b.svg\";","module.exports = __webpack_public_path__ + \"static/media/dateAndTagsIcon.3f1d548c.svg\";","module.exports = __webpack_public_path__ + \"static/media/completionTick.e5ae86e5.svg\";","import React, { useState, useEffect, useRef } from 'react';\r\nimport styled from 'styled-components';\r\nimport {getFile, removeFiles} from '../services/dataController';\r\nimport placeholder from '../assets/placeholder.svg';\r\n\r\nconst Wrapper = styled.div`\r\n    max-width: 100%;\r\n    display: grid;\r\n    place-items: center center;\r\n`;\r\nconst Img = styled.img`\r\n    max-width: 100%;\r\n`;\r\nconst Note = styled(Wrapper)`\r\n    background: ${props => props.theme.offWhite};\r\n    min-height: 100%;\r\n    padding: 10%;\r\n    color: ${props => props.theme.darkGrey};\r\n    & h1 {\r\n        color: ${props => props.theme.darkGrey};\r\n    }\r\n`;\r\nconst FileIcon = styled.div`\r\n    max-width: 100%;\r\n    display: grid;\r\n    place-items: center center;\r\n    background: ${props => props.background};\r\n    color: ${props => props.theme.darkGrey};\r\n    width: 300px;\r\n    height: 150px;\r\n`;\r\n\r\nconst Options = styled.div`\r\n    background: none;\r\n    position: absolute;\r\n    background: none;\r\n    outline: none;\r\n    border: 1px solid ${props => props.theme.greyBlue};\r\n    font-size: 1rem;\r\n    padding: 0.1rem 0.5rem;\r\n  \r\n    &:hover {\r\n      color: ${props => props.theme.offWhite};\r\n      background: ${props => props.theme.red};\r\n    }\r\n`;\r\n\r\nconst OptionsContainer = styled.div`\r\n    display: flex;\r\n    position: relative;\r\n    flex-direction: row;\r\n    justify-content: flex-end;\r\n`;\r\n\r\nconst FileContainer = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    max-width: 50vw;\r\n\r\n    @media (max-width: 1000px){\r\n        max-width: 70vw;\r\n    }\r\n\r\n    @media (max-width: 500px){\r\n        max-width: 90vw;\r\n    }\r\n`;\r\n\r\nconst Time = styled.time`\r\n    color: ${props => props.theme.orange};\r\n    text-decoration: underline;\r\n    text-decoration-color: ${props => props.theme.blue};\r\n    padding-top: 32px;\r\n`;\r\n\r\nconst Link = styled.a`\r\n    text-decoration: none;\r\n    width: 100%;\r\n    height: 100%;\r\n`;\r\n\r\n\r\nconst FileNotFound = styled.div`\r\n    max-width: 100%;\r\n    display: grid;\r\n    place-items: center center;\r\n    background: ${props => props.theme.red};\r\n    color: ${props => props.theme.offWhite};\r\n    width: 300px;\r\n    height: 150px;\r\n    text-align: center;\r\n`;\r\n\r\nexport default function File({fileObj, showTime, time, isMain}) {\r\n    const [file, setFile] = useState(placeholder);\r\n    const enableEditOptions = isMain;\r\n    const enableDownload = isMain;\r\n\r\n    function removeFile() {\r\n        let selectedFile = fileObj;\r\n        removeFiles([selectedFile]);\r\n    }\r\n\r\n    const ref = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const refCurrent = ref.current;\r\n        if (ref.current) {\r\n            let observer = new IntersectionObserver(entries => {\r\n                if (entries[0].isIntersecting) {\r\n                    getFile(fileObj.fileRef).then(blob => {\r\n                        let url = null\r\n                        if (blob) {\r\n                            url = URL.createObjectURL(blob);\r\n                        }\r\n                        setFile(url);\r\n                        if (url === null) {\r\n                            fileObj.flagMissingData();\r\n                        }\r\n                        observer.unobserve(ref.current);\r\n                    }); \r\n                }\r\n            });\r\n            observer.observe(ref.current); \r\n            return () => observer.unobserve(refCurrent);\r\n        }\r\n    }, [ref, fileObj, fileObj.fileMissing]);\r\n\r\n    const DownloadWrapper = props => {\r\n        const condenseSize = size => size < 1000 ? size+'B' : size < Math.pow(10, 6) ? (size/1000).toFixed(2)+'KB' : size < Math.pow(10, 9) ? (size/Math.pow(10, 6)).toFixed(2)+'MB' : (size/Math.pow(10, 9)).toFixed(2)+'GB';\r\nconst info = `\r\n${fileObj.name} \r\nlastModifed: ${fileObj.unFormatDate(fileObj.timeStamps.modified)} \r\n${fileObj.timeStamps.user ? 'userSetTime: '+fileObj.unFormatDate(fileObj.timeStamps.user)+'\\n' : ''}type: ${fileObj.type}\r\n${fileObj.tag?.length > 0 ? 'tags: '+fileObj.tags.join(' ')+'\\n' : ''}${fileObj.size ? 'size: '+condenseSize(fileObj.size)+'\\n' : ''}\r\n    \r\n`;\r\n        if (props.enabled) {\r\n            return <Link title={info} href={file} download={fileObj.name}>\r\n                {props.children}\r\n            </Link>\r\n        }\r\n        return props.children\r\n    }\r\n   \r\n    if (fileObj) {\r\n        return (\r\n            <FileContainer ref={ref} >\r\n                {showTime && <Time dateTime={time}>{time}</Time>}\r\n                {enableEditOptions &&\r\n                <OptionsContainer className=\"edit-options\"> \r\n                    <Options onClick={removeFile}>&times;</Options> \r\n                </OptionsContainer> \r\n                }\r\n                {file === null ? <FileNotFound>File Not Found! Please upload file: {fileObj.name}</FileNotFound> :\r\n                <DownloadWrapper enabled={enableDownload}>\r\n                    {fileObj.type.includes('image') ? \r\n                        <Img src={file} alt=\"\" /> : \r\n                        fileObj.type === 'note' ? <Note className=\"note\"><h1>{fileObj.name}</h1><p>{fileObj.text}</p></Note> :\r\n                        <FileIcon {...charsToColour(fileObj.type)}>{fileObj.name}</FileIcon>\r\n                    }\r\n                </DownloadWrapper>}\r\n            </FileContainer>\r\n        )\r\n    }\r\n    else { \r\n        return <FileNotFound>File has vanished! :&lt;</FileNotFound>\r\n    }\r\n}\r\n\r\nfunction charsToColour(str, opacity = 0.8) {\r\n    let nineDigitStr = '';\r\n    let i = 0;\r\n    while(nineDigitStr.length < 9) {\r\n        nineDigitStr += str.charCodeAt(i%str.length);\r\n        i++;\r\n    }\r\n    let [r,g,b] = nineDigitStr.match(/.{3}/g);\r\n    const max255 = numStr => parseInt(numStr, 10)%255;\r\n    const invertN = numStr => 255 - max255(numStr);\r\n    return {background: `rgba(${max255(r)},${max255(g)},${max255(b)},${opacity})`, color: `rgb(${invertN(r)},${invertN(g)},${invertN(b)})`}\r\n}","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport File from './File';\r\n\r\nconst Wrapper = styled.section`\r\n    max-width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-self: center;\r\n    justify-content: center;\r\n`;\r\n\r\nexport default function Node({ fileObjs, isMain = false }) {\r\n    let lastTime = '';\r\n    let output = '';\r\n    if (fileObjs) {\r\n        output = fileObjs.map(fileObj => {\r\n            let showTime = isMain;\r\n            if (isMain) {\r\n                var time = fileObj.getActiveDate().substr(8).match(/.{2}/g).join(':');\r\n                showTime = time !== lastTime;\r\n                lastTime = time;\r\n            }\r\n            return <File key={fileObj.uid} {...{fileObj, showTime, time, isMain}} />\r\n        });\r\n    }\r\n    return (\r\n        <Wrapper>\r\n            {output}\r\n        </Wrapper>\r\n    )\r\n}","import React, {useState, useEffect} from 'react';\r\nimport Node from './Node';\r\nimport styled from 'styled-components';\r\nimport { fileObjsSubcription } from '../services/dataController';\r\nimport plusSign from '../assets/plusSign.svg';\r\n\r\nconst Wrapper = styled.main`\r\n  display: grid;\r\n  place-items: center center;\r\n  margin: 2vw;\r\n  margin-top: 0;\r\n  & section>div {\r\n    margin: 8px;\r\n  }\r\n  & section .note {\r\n    min-width: 300px;\r\n  }\r\n  & .edit-options {\r\n    display: none;\r\n  }\r\n  &.editing .edit-options {\r\n    display: flex;\r\n  }\r\n\r\n  &.hidden {\r\n    overflow: hidden;\r\n    max-height: 100vh;\r\n  }\r\n  color: ${props => props.theme.darkGrey};\r\n`;\r\nconst Header = styled.header`\r\n  width: 100%;\r\n  text-align: center;\r\n  margin: 24px;\r\n  // color: ${props => props.theme.orange};\r\n`;\r\n\r\nconst PlusImg = styled.img`\r\n    height: 120px;\r\n    width: 120px;\r\n    @media (max-width: 500px){\r\n      height: 40px;\r\n      width: 40px;\r\n    }\r\n`;\r\n\r\nconst StartHelp = styled.div`\r\n  height: 80vh;\r\n  width: 80%;\r\n  margin-left: 10%;\r\n  display: flex;\r\n  flex-flow: row wrap;\r\n  justify-content: space-evenly;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nfunction Main({editMode, showUploads, setShowUploads})  {\r\n  const [activeFileObjs, setActiveFileObjs] = useState(null);\r\n  useEffect(() => {\r\n    fileObjsSubcription.subscribe(setActiveFileObjs);\r\n    return () => fileObjsSubcription.unsubscribe(setActiveFileObjs);\r\n  }, []);\r\n\r\n  function getActiveNodeDate() {\r\n    const obj = activeFileObjs[0];\r\n    if(obj) {\r\n      return new Date(obj.unFormatDate(obj.getActiveDate()).substr(0, 10)).toDateString()\r\n    }\r\n  } \r\n\r\n  let output = (<>\r\n    <Header>\r\n      <StartHelp>\r\n      <h1>Welcome!</h1>\r\n      <PlusImg onClick={() => setShowUploads(true)} src={plusSign} alt=\"toggle upload modal open button\" />\r\n      <h2>Add some files to begin.</h2>\r\n      </StartHelp>\r\n    </Header>\r\n  </>);\r\n  if (activeFileObjs && activeFileObjs.length > 0) {\r\n    output = <>\r\n    <Header>\r\n      <time>{getActiveNodeDate()}</time>\r\n    </Header>\r\n    <Node fileObjs={activeFileObjs} isMain />\r\n    </>;\r\n  }\r\n  \r\n  return (\r\n    <Wrapper className={editMode ? 'editing' : showUploads ? \"hidden\" : ''}>\r\n      {output}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React, { useState, Fragment, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport Node from './Node';\r\nimport openTimelineIcon from '../assets/openIcon.svg';\r\nimport { nodesListSubcription, setActiveNode, activeNode } from '../services/dataController';\r\n\r\nconst Wrapper = styled.div`\r\nwidth: 100%;\r\nmin-height: 30vw;\r\nposition: fixed;\r\nbottom: 70px;\r\nleft: 0;\r\ndisplay: grid;\r\noverflow: auto;\r\nbackground: ${props => props.theme.greyBlueTransp};\r\npadding-top: 18px;\r\n&.contracted {\r\n  min-height: 94px;\r\n  height: 94px;\r\n}\r\n&::-webkit-scrollbar {\r\n  height: 8px;\r\n}\r\n&::-webkit-scrollbar-track {\r\n  background: ${props => props.theme.greyBlue};\r\n}\r\n&::-webkit-scrollbar-thumb {\r\n  background: ${props => props.theme.darkBlue};\r\n  border-radius: 8px;\r\n}\r\n&::-webkit-scrollbar-thumb:hover {\r\n  background: ${props => props.theme.lightBlue};\r\n}\r\n&.editing .edit-options {\r\n  display: flex;\r\n}\r\n& .edit-options {\r\n  display: none;\r\n}\r\nz-index: 50;\r\n`;\r\nconst Line = styled.div`\r\nmin-width: 100%;\r\ndisplay: flex;\r\nflex-flow: row nowrap;\r\njustify-content: flex-start;\r\n`;\r\nconst Title = styled.header`\r\nwidth: 100%;\r\ntext-align: center;\r\ndisplay: flex;\r\nflex-flow: row nowrap;\r\n// color: ${props => props.theme.darkGrey};\r\nfont-size: 11px;\r\n&::before,\r\n&::after {\r\n  display: inline-block;\r\n  content: '';\r\n  border-top: 1px solid ${props => props.theme.blue};\r\n  width: 50%;\r\n  margin: 0 12px;\r\n  transform: translateY(50%);\r\n}\r\n&::before {\r\n  border-left: 1px solid ${props => props.theme.blue};\r\n}\r\n&::after {\r\n  border-right: 1px solid ${props => props.theme.blue};\r\n}\r\n`;\r\nconst Year = styled.div`\r\ndisplay: grid;\r\ngrid-template-rows: 18px auto;\r\nplace-items: start center;\r\n`;\r\nconst Months = styled.div`\r\nwidth: 100%;\r\ndisplay: flex;\r\nflex-flow: row nowrap;\r\njustify-content: center;\r\n`;\r\nconst Month = styled.div`\r\ndisplay: grid;\r\ngrid-template-rows: 18px auto;\r\nplace-items: start center;\r\n`;\r\nconst Dates = styled.div`\r\nwidth: 100%;\r\ndisplay: flex;\r\nflex-flow: row nowrap;\r\njustify-content: stretch;\r\n`;\r\nconst DateItem = styled.div`\r\ndisplay: grid;\r\ngrid-template-rows: 18px 0;\r\n&.expanded {\r\n  grid-template-rows: 18px 20vw;\r\n}\r\nplace-items: start center;\r\nwidth: 10vw;\r\n& header {\r\n  // color: ${props => props.theme.darkGrey};\r\n  font-size: 10px;\r\n  text-align: center;\r\n}\r\n& section {\r\n  word-break: break-all;\r\n  display: inline-block;\r\n  max-height: 100%;\r\n  width: 100%;\r\n  overflow-y: auto;\r\n  background: ${props => props.theme.blue};\r\n  border-radius: 8px;\r\n  padding: 0.2vw;\r\n  &::-webkit-scrollbar {\r\n  width: 4px;\r\n  }\r\n  &::-webkit-scrollbar-track {\r\n    background: transparent;\r\n  }\r\n  &::-webkit-scrollbar-thumb {\r\n    background: ${props => props.theme.darkBlue};\r\n    border-radius: 2px;\r\n  }\r\n  &::-webkit-scrollbar-thumb:hover {\r\n    background: ${props => props.theme.lightBlue};\r\n  }\r\n  &>div {\r\n    font-size: 0.8vw;\r\n    height: 5vw;\r\n    overflow: hidden;\r\n    padding: 0.2vw;\r\n    &>div {\r\n      max-height: 100%;\r\n    }\r\n  }\r\n}\r\n&.active section {\r\n  background: ${props => props.theme.lightBlue};\r\n}\r\n`;\r\nconst Gap = styled.div`\r\nwidth: 5vw;\r\nplace-items: start center;\r\n`;\r\nconst Bar = styled(Gap)`\r\n  width: ${props => (props.wide/2)+'vw'};\r\n  &.expanded::before {\r\n    display: inline-block;\r\n    content: '';\r\n    height: 0.5vw;\r\n    width: 100%;\r\n    background: ${props => props.theme.blue};\r\n    position: relative;\r\n    top: 10.5vw;\r\n  }\r\n`;\r\nconst ExpandButton = styled.div`\r\nposition:fixed;\r\nbottom: 94px;\r\nright: 40px;\r\nwidth: 50px;\r\nheight: 50px;\r\nz-index: 100;\r\n&.close img {\r\n  transform: rotate(180deg);\r\n}\r\n`;\r\n\r\nfunction Timeline({editMode}) {\r\n\r\n  const [showNodes, setShowNodes] = useState(false);\r\n  const [nodesList, setNodesList] = useState(null);\r\n\r\n  useEffect(() => {\r\n    nodesListSubcription.subscribe(setNodesList);\r\n    return () => nodesListSubcription.unsubscribe(setNodesList);\r\n  }, []\r\n  )\r\n\r\n  let output = '';\r\n  if (nodesList && Object.keys(nodesList).length > 0) {\r\n    let lastDate = null;\r\n    const scrollTo = ref =>\r\n      ref.current.scrollIntoView({\r\n      behavior: 'smooth',\r\n      inline: 'center'\r\n    });\r\n    const TimeLine = <Line>\r\n      {Object.keys(nodesList).sort().map(year => {\r\n        const ref = React.createRef(); \r\n        return (\r\n          <Year ref={ref} key={year}>\r\n            <Title onClick={() => scrollTo(ref)}>{year}</Title>\r\n            <Months>\r\n              {Object.keys(nodesList[year]).sort().map(month => {\r\n                const ref = React.createRef();\r\n                const monthStr = new Date(`${year}-${month}-01`).toDateString().substr(4,3);\r\n                return (\r\n                  <Month ref={ref} key={year+month}>\r\n                    <Title onClick={() => scrollTo(ref)}>{monthStr}</Title>\r\n                    <Dates>\r\n                      <Bar wide={5} className={showNodes && 'expanded'}></Bar>\r\n                      {Object.keys(nodesList[year][month]).sort().map(date => {\r\n                        let totalBars = 0;\r\n                        if (lastDate) {\r\n                          totalBars += ((year - lastDate.year) > 0 && 10) || ((month - lastDate.month) > 0 && 5) || (date - lastDate.date > 0 && 1);\r\n                        }\r\n                        lastDate = {year,month,date};\r\n                        const nodeDate = new Date(`${year}-${month}-${date}`).toDateString();\r\n                        const ref = React.createRef();\r\n                        const isActive = year+month+date === activeNode;\r\n                        const handleClick = () => {\r\n                          setActiveNode(nodesList[year][month][date][0]);\r\n                          scrollTo(ref);\r\n                        }\r\n                        const handleLoad = () => {\r\n                          if (isActive) {\r\n                            scrollTo(ref);\r\n                          }\r\n                        }\r\n                        return (<Fragment key={year+month+date+totalBars}> \r\n                          <Bar wide={totalBars} className={showNodes && 'expanded'}></Bar>\r\n                          <DateItem ref={ref} className={(isActive ? 'active ' : '')+(showNodes && 'expanded')} onLoad={handleLoad} onClick={handleClick}>\r\n                            <header>{nodeDate.substr(0,3)+' '+nodeDate.substr(8,2)}</header>\r\n                            {showNodes && <Node fileObjs={nodesList[year][month][date]} />}\r\n                          </DateItem>\r\n                        </Fragment>) \r\n                      })}\r\n                    <Bar wide={5} className={showNodes && 'expanded'}></Bar>\r\n                    </Dates>\r\n                  </Month>\r\n                )\r\n              })}\r\n            </Months>\r\n          </Year>\r\n        )\r\n        \r\n      })} \r\n    </Line>;\r\n    output = <Wrapper className={`${!showNodes && 'contracted'} ${editMode && 'editing'}`}>\r\n      <ExpandButton className={showNodes && 'close'} onClick={() => setShowNodes(!showNodes)}><img src={openTimelineIcon} alt=\"close timeline\" /></ExpandButton>\r\n      {TimeLine}\r\n    </Wrapper>;\r\n  }\r\n  return output;\r\n}\r\n\r\nexport default Timeline;\r\n","import React, { useState, useRef } from 'react';\r\nimport styled  from 'styled-components';\r\nimport plusSign from '../assets/plusSign.svg';\r\nimport logo from './../../src/assets/wavy-logo.svg';\r\nimport minusSign from '../assets/minusSign2.svg';\r\nimport EditButton from  '../assets/trashTumbleIcon.svg';\r\nimport ImportButton from '../assets/importButton.svg';\r\nimport ExportButton from '../assets/exportButton.svg';\r\nimport {exportTimeLine, importTimeLine} from '../services/dataController';\r\n\r\nconst NavBarContainer = styled.div`\r\n    display: grid;\r\n    grid-template-columns: 1fr 200px 1fr;\r\n    justify-content: center;\r\n    width: 100vw;\r\n    height: 70px;\r\n    background: #1B71D5;\r\n    opacity: 0.7;\r\n    position: fixed;\r\n    bottom: 0px;\r\n`;\r\n\r\nconst Logo = styled.img`\r\n  padding-left: 30px;\r\n  width: 230px;\r\n  height: 50px;\r\n  align-self: center;\r\n\r\n  @media (max-width: 800px){\r\n    width: 70px;\r\n    height: 30px;\r\n    align-self: center;\r\n    padding-left: 5px;\r\n\r\n  }\r\n`;\r\n\r\nconst ButtonContainer = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n    position: relative;\r\n    justify-content: center;\r\n    align-items: center;\r\n    justify-self: center;\r\n    border: 1px solid green;\r\n    width: auto;\r\n`;\r\n\r\nconst ToggleModalButton = styled.div`\r\n    display: flex;\r\n    height: 60px;\r\n    width: 60px;\r\n    align-items: center;\r\n    justify-content: center;\r\n\r\n    @media (max-width: 800px){\r\n      height: 40px;\r\n      width: 40px;\r\n    }\r\n`;\r\n\r\nconst PlusImg = styled.img`\r\n    height: 60px;\r\n    width: 60px;\r\n\r\n    @media (max-width: 800px){\r\n      height: 40px;\r\n      width: 40px;\r\n    }\r\n`;\r\n\r\nconst MinusImg = styled.img`\r\n    height: 60px;\r\n    width: 60px;\r\n    @media (max-width: 800px){\r\n      height: 40px;\r\n      width: 40px;\r\n    }\r\n`;\r\n\r\n\r\nconst EditModeButton = styled.img`\r\n    display: flex;\r\n    height: 60px;\r\n    width: 60px;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-left: 5px;\r\n\r\n    @media (max-width: 800px){\r\n      height: 40px;\r\n      width: 40px;\r\n    }\r\n`;\r\n\r\nexport const ImportButtonInput = styled.input`\r\n  border: 0;\r\n  clip: rect(0, 0, 0, 0);\r\n  height: 1px;\r\n  overflow: hidden;\r\n  padding: 0;\r\n  position: absolute !important;\r\n  white-space: nowrap;\r\n  width: 1px;\r\n`;\r\n\r\nexport const ImportButtonLabel = styled.label`\r\n  height: 60px;\r\n  width: 60px;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-left: 5px;\r\n\r\n  @media (max-width: 800px){\r\n    height: 40px;\r\n    width: 40px;\r\n  }\r\n`;\r\n\r\nconst ImportButtonIcon = styled.img`\r\n  display: flex;\r\n  height: 60px;\r\n  width: 60px;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  @media (max-width: 800px){\r\n    height: 40px;\r\n    width: 40px;\r\n  }\r\n`;\r\n\r\nconst ExportButtonContainer = styled.img`\r\n  display: flex;\r\n  height: 60px;\r\n  width: 60px;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-left: 10px;\r\n  \r\n  @media (max-width: 800px){\r\n    height: 40px;\r\n    width: 40px;\r\n  }\r\n`;\r\n\r\nconst HiddenDownloadLink = styled.a`\r\n  display: none;\r\n`;\r\n\r\nfunction NavBar({showUploads, setShowUploads, editMode, setEditMode}) {\r\n  const [downloadStatus, setDownloadStatus] = useState(null);\r\n  const downloadLinkRef = useRef();\r\n  \r\n  async function startDownload(e) {\r\n    if (!downloadStatus && downloadStatus !== 'inprogress') {\r\n      setDownloadStatus('inprogress');\r\n      try {\r\n        const file = await exportTimeLine();\r\n        if (file) {\r\n          setDownloadStatus(null);\r\n          const url = await URL.createObjectURL(file);\r\n          downloadLinkRef.current.href = url;\r\n          downloadLinkRef.current.download = Date.now().toString()+'.wavy';\r\n          downloadLinkRef.current.click();\r\n        }\r\n      }\r\n      catch (e) {\r\n        setDownloadStatus(null);\r\n        console.error(e);\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  function handleUpload(e) {\r\n    importTimeLine(e.target.files[0]);\r\n  }\r\n\r\n  return (\r\n    <NavBarContainer>\r\n      <Logo src={logo} alt=\"Wavy logo\"/>\r\n        <ButtonContainer>\r\n          <ToggleModalButton onClick={() => setShowUploads(!showUploads)}>\r\n            {\r\n              !showUploads ?\r\n              <PlusImg src={plusSign} alt=\"toggle upload modal open button\" /> : \r\n              <MinusImg  src={minusSign} alt=\"toggle upload modal closed button\" />  \r\n            } \r\n          </ToggleModalButton>\r\n          <EditModeButton src={EditButton} onClick={() => setEditMode(!editMode)} />\r\n          <ImportButtonInput type=\"file\" id=\"file\" accept=\".wavy\" onChange={handleUpload} />\r\n          <ImportButtonLabel htmlFor=\"file\">\r\n            <ImportButtonIcon src={ImportButton} alt=\"import a timeline file\" />\r\n          </ImportButtonLabel> \r\n          <ExportButtonContainer src={ExportButton} onClick={startDownload} alt=\"export a timline file\" />\r\n          <HiddenDownloadLink ref={downloadLinkRef} />\r\n        </ButtonContainer>\r\n    </NavBarContainer>\r\n  );\r\n}\r\n\r\nexport default NavBar;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"translate(-256 -911)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6.5,0,13,8H0Z\",\n  transform: \"translate(256 924) rotate(-90)\",\n  fill: \"#fff\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: 24,\n  height: 4,\n  transform: \"translate(263 916)\",\n  fill: \"#fff\"\n}));\n\nvar SvgBackArrow = function SvgBackArrow(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 31,\n    height: 13,\n    viewBox: \"0 0 31 13\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgBackArrow, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/back-arrow.cef689aa.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"text\", {\n  id: \"_\",\n  \"data-name\": \"\\\\u2713\",\n  transform: \"translate(0 44)\",\n  fill: \"#58ed15\",\n  fontSize: 45,\n  fontFamily: \"LucidaGrande, Lucida Grande\"\n}, /*#__PURE__*/React.createElement(\"tspan\", {\n  x: 0,\n  y: 0\n}, \"\\u2713\"));\n\nvar SvgCompletionTick = function SvgCompletionTick(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 35,\n    height: 53,\n    viewBox: \"0 0 35 53\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCompletionTick, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/completionTick.e5ae86e5.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { uploadFuncs } from '../services/dataController'; \r\nimport { ReactComponent as BackArrow } from './../assets/back-arrow.svg';\r\nimport { ReactComponent as TickIcon } from './../assets/completionTick.svg';\r\n// import DateAndTagsEditor from './DateAndTagsEditor';\r\n\r\nconst { add } = uploadFuncs;\r\n\r\nconst ModalWindow = styled.section`\r\n  width: 100vw;\r\n  height: 100vh;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  background: ${props => props.theme.greyBlueTransp};\r\n`;\r\n\r\nconst NotesForm = styled.div`\r\n  max-width: 414px;\r\n  margin: auto;\r\n  background: ${props => props.theme.lightGrey};\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 0.5rem 2rem 2rem;\r\n  position: relative;\r\n  z-index: 60;\r\n  top: 20px;\r\n`;\r\n\r\nconst formControlBase = css`\r\n  padding: 0.8rem;\r\n  margin-top: 1rem;\r\n  border: none;\r\n  width: 100%;\r\n`;\r\nconst Input = styled.input`\r\n  ${formControlBase};\r\n`;\r\n\r\nconst Button = styled.button`\r\n  ${formControlBase}\r\n  background: ${props => props.theme.blue};\r\n  width: 100%;\r\n  outline: none;\r\n`;\r\n\r\nconst NotesArea = styled.textarea`\r\n  height: 30vh;\r\n  ${formControlBase};\r\n`;\r\n\r\nconst AddNoteModal = ({ close }) => {\r\n  const [notesTitle, setNotesTitle] = useState(\"\");\r\n  const [notesBody, setNotesBody] = useState(\"\");\r\n  \r\n  const submit = () => {\r\n    const note = {\r\n      name: notesTitle,\r\n      text: notesBody,\r\n      type: 'note'\r\n    };\r\n    add([note]);\r\n    close();\r\n  }\r\n  const hasNotes = notesTitle !== \"\" && notesBody !== \"\";\r\n\r\n  return (\r\n    <ModalWindow>\r\n      <NotesForm>\r\n        <Input type=\"text\"\r\n          name=\"title\"\r\n          id=\"title\" \r\n          placeholder=\"Title\"\r\n          ariaLabel=\"Title\"\r\n          value={ notesTitle }\r\n          onChange={ e => setNotesTitle(e.target.value) }\r\n        />\r\n        <NotesArea type=\"text-area\"\r\n          name=\"notes\"\r\n          id=\"notes\"\r\n          placeholder=\"Enter your notes here\"\r\n          ariaLabel=\"Notes area\"\r\n          value={ notesBody }\r\n          onChange={ e => setNotesBody(e.target.value) }\r\n        />\r\n          <Button\r\n          type={hasNotes ? \"submit\" : \"button\"}\r\n          onClick={hasNotes ? submit : close}>{hasNotes ? <TickIcon /> : <BackArrow />}\r\n        </Button>\r\n        </NotesForm>\r\n    </ModalWindow>\r\n    );\r\n}\r\n \r\nexport default AddNoteModal;\r\n\r\n \r\n\r\n","import React , {useState, useEffect} from 'react';\r\nimport styled from 'styled-components';\r\nimport DateAndTagsEditor from './DateAndTagsEditor';\r\nimport { uploadFuncs } from '../services/dataController';\r\nimport AddNoteModal from './AddNoteModal';\r\nimport completionTick from '../assets/completionTick.svg';\r\n\r\nconst { add, submit, subscribe, deleteUpload, unsubscribe } = uploadFuncs;\r\n\r\nconst ModalWindow = styled.section`\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  background: ${props => props.theme.greyBlueTransp};\r\n`;\r\n\r\nconst UploadModalWrapper = styled.div`\r\n  max-width: 414px;\r\n  margin: auto;\r\n  padding: 1rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background: ${props => props.theme.lightGrey};\r\n  position: relative;\r\n  z-index: 60;\r\n  top: 20px;\r\n`;\r\n\r\nconst AddedFiles = styled.div`\r\n  min-height: 52vh;\r\n  position: relative;\r\n  top: -16px;\r\n  width: 108%;\r\n  background-color: ${props => props.theme.offWhite};\r\n  padding: 1rem;\r\n  margin-bottom: 7px;\r\n  display: grid;\r\n  grid-template-rows: 40px auto 40px;\r\n  // justify-content: center;\r\n`;\r\n\r\nconst ModalTitle = styled.h2`\r\n  text-transform: uppercase;\r\n  margin-bottom: 1.5rem;\r\n  text-align: center;\r\n  color: ${props => props.theme.orange};\r\n`;\r\n\r\nconst FileList = styled.ul`\r\n  list-style-type: none;\r\n  padding: 0;\r\n`;\r\n\r\nconst FileItem = styled.li`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-bottom: 1px solid ${props => props.theme.lightGrey};\r\n  padding: 0.5rem;\r\n  margin-left: 15px;\r\n  margin-right: 15px;\r\n`;\r\n\r\nconst FileName = styled.p`\r\n  flex-basis: 50%;\r\n`;\r\n\r\nconst DeleteButton = styled.button`\r\n  background: none;\r\n  outline: none;\r\n  border: 1px solid ${props => props.theme.greyBlue};\r\n  font-size: 2rem;\r\n  padding: 0.1rem 0.5rem;\r\n\r\n  &:hover {\r\n    color: ${props => props.theme.offWhite};\r\n    background: ${props => props.theme.red};\r\n  }\r\n`;\r\n\r\nconst GlobalWrapper = styled.div`\r\n  justify-self: center;  \r\n  margin-top: 10px;\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst Button = styled.button`\r\n  padding: 0.8rem;\r\n  border: none; \r\n  width: ${props => props.name === \"cancel\" ? \"30%\" : \"70%\"};\r\n  color: ${props => props.theme.offWhite};\r\n  background: ${props => props.name === \"cancel\" ? props.theme.red : props.theme.blue};\r\n  cursor: ${props => props.disabled === true ? \"not-allowed\": \"pointer\"};\r\n  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);\r\n`;\r\n\r\nconst ButtonGroup = styled.div`\r\n  margin: 1rem auto;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nexport const ToolsGroups = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n    width: 70%;\r\n    margin-top: 5px;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    place-self: bottom center;\r\n\r\n`;\r\n\r\nconst AddNoteButton = styled.div`\r\n  width: 120px;\r\n  height: 60px;\r\n  padding: 1px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-family: 'Proza Libre', sans-serif;\r\n  background-color: white;\r\n  opacity: 0.9;\r\n  color: #EA9713;\r\n  font-size: 15px;\r\n  cursor: pointer;\r\n  -webkit-transition-duration: 0.4s; /* Safari */\r\n  transition-duration: 0.4s;\r\n  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);\r\n `;\r\n\r\nexport const FileUploadInput = styled.input`\r\n  border: 0;\r\n  clip: rect(0, 0, 0, 0);\r\n  height: 1px;\r\n  overflow: hidden;\r\n  padding: 0;\r\n  position: absolute !important;\r\n  white-space: nowrap;\r\n  width: 1px;\r\n`;\r\n\r\nexport const FileUploadLabel = styled.label`\r\n  width: 120px;\r\n  height: 60px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 1px;\r\n  font-family: 'Proza Libre', sans-serif;\r\n  background: white;\r\n  opacity: 0.9;\r\n  color: #EA9713;\r\n  font-size: 15px;\r\n  cursor: pointer;\r\n  -webkit-transition-duration: 0.4s; /* Safari */\r\n  transition-duration: 0.4s;\r\n  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);\r\n`;\r\n\r\nconst Img = styled.img`\r\n  height: 40px;\r\n  padding: none;\r\n`;\r\n\r\n\r\n\r\nconst getShortName = fileName =>  fileName.length <= 23 ? fileName : fileName.substr(0, 20) + \"...\";\r\n\r\nfunction UploadModal({close}) {\r\n  const [noteModalOpen, setNoteModalOpen] = useState(false);\r\n  const [uploads, setUploads] = useState([]);\r\n  useEffect(() => {\r\n    subscribe(setUploads);\r\n    return () => unsubscribe(setUploads)\r\n  }, []);\r\n\r\n  function handleOnChange(e) {\r\n    add(e.target.files);\r\n    e.target.value = null;\r\n  }\r\n\r\n  const modal = (<>\r\n    <ModalWindow>\r\n      <UploadModalWrapper>\r\n        <AddedFiles>\r\n          <ModalTitle>{uploads.length < 1 ? \"Upload some file(s)\" : \"Uploads\"}</ModalTitle>\r\n          <FileList>\r\n            {uploads.map(upload =>\r\n              <FileItem key={upload.uid}>\r\n              <FileName>{getShortName(upload.file.name).toLowerCase()}</FileName>\r\n                <DateAndTagsEditor {...{ uploads: [upload] }}/>\r\n                <DeleteButton\r\n                  onClick={ () => deleteUpload(upload.uid) }\r\n                  aria-label=\"Delete upload\">\r\n                  &times;\r\n              </DeleteButton>\r\n            </FileItem>)}\r\n          </FileList>\r\n          {uploads.length > 1 && <GlobalWrapper><DateAndTagsEditor  {...{ uploads }} isGlobal></DateAndTagsEditor></GlobalWrapper>}\r\n        </AddedFiles>\r\n\r\n        <ToolsGroups>\r\n            <FileUploadInput type=\"file\" id=\"file\" onChange={handleOnChange} multiple/> \r\n            <FileUploadLabel htmlFor=\"file\">ADD FILES</FileUploadLabel>\r\n            <AddNoteButton onClick={() => setNoteModalOpen(true)}>ADD NOTE</AddNoteButton>\r\n          </ToolsGroups>\r\n\r\n        <ButtonGroup>\r\n          <Button onClick={() => {submit(); close();}}><Img src={completionTick} alt='green tick' /></Button>\r\n        </ButtonGroup>\r\n        \r\n      </UploadModalWrapper>\r\n    </ModalWindow>\r\n  </>);\r\n\r\n  \r\n\r\n  return noteModalOpen ? <AddNoteModal close={() => setNoteModalOpen(false)}/> : modal;\r\n}\r\n \r\nexport default UploadModal;\r\n","import { createGlobalStyle } from 'styled-components';\r\n\r\nexport const theme = {\r\n  red: \"#FC5F6B\",\r\n  blue: \"#12A7EA\",\r\n  darkBlue: \"#1B71D5\",\r\n  veryDarkBlue: \"#1B71D5\",\r\n  greyBlue: \"#AEC1D5\",\r\n  lightBlue: \"#D6F3FF\",\r\n  blueGradient: \"#5574f7-#60C3FF\",\r\n  grey: \"#BCC5D3\",\r\n  lightGrey: \"#E2E8ED\",\r\n  darkGrey: \"#707070\",\r\n  white: \"#FFFFFF\",\r\n  offWhite: \"#F6F6F6\",\r\n  orange: \"#EA9713\",\r\n  green:\"#58ED15\",\r\n  greyBlueTransp: \"rgba(174,193,213,0.75)\",\r\n  darkBlueTransp: \"rgba(27,113,213,0.6)\"\r\n}\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n*,\r\n*::before,\r\n*::after {\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n}\r\n\r\nbody {\r\n  font-family: 'Lato', sans-serif;\r\n  font-size: 16px;\r\n}\r\n\r\nh1, h2, h3, h4, h5, h6 {\r\n  font-family: 'Proza Libre', sans-serif;\r\n  font-weight: 600;\r\n  color: ${theme.orange};\r\n}\r\n\r\nheader {\r\n  color: ${theme.orange};\r\n}\r\n`;\r\n\r\nexport default GlobalStyle;\r\n\r\n","import React, {useState} from 'react';\r\nimport Main from './components/Main';\r\nimport Timeline from './components/Timeline';\r\nimport NavBar from './components/NavBar';\r\nimport UploadModal from './components/UploadModal';\r\nimport styled, {ThemeProvider} from 'styled-components';\r\nimport GlobalStyle, {theme} from './theme/globalStyles';\r\n\r\nfunction App() {\r\n  const [appTheme, setAppTheme] = useState(theme);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [showUploads, setShowUploads] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <GlobalStyle />\r\n      <ThemeProvider theme={appTheme}>\r\n        {showUploads && <UploadModal close={() => setShowUploads(false)} />}\r\n        <Main {...{editMode, showUploads, setShowUploads}} />\r\n        <nav>\r\n          <Timeline {...{editMode}} />\r\n          <NavBar {...{showUploads, setShowUploads, editMode, setEditMode}} />\r\n        </nav>\r\n      </ThemeProvider>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n// import * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\n// serviceWorker.unregister();\r\n"],"sourceRoot":""}